(function(t){function e(e){for(var n,r,s=e[0],c=e[1],u=e[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var s=a[r];0!==o[s]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},o={app:0},i=[];function s(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{"chunk-2d2383f8":"e3a3878b","chunk-3d36b970":"dd15c717",about:"7f9b0e37","chunk-079c01bc":"95f8fd05"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-3d36b970":1,about:1,"chunk-079c01bc":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var n="css/"+({about:"about"}[t]||t)+"."+{"chunk-2d2383f8":"31d6cfe0","chunk-3d36b970":"1cec9533",about:"fcc6ced1","chunk-079c01bc":"994b3ee4"}[t]+".css",o=c.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===o))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===n||l===o)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete r[t],f.parentNode.removeChild(f),a(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[t]=0})));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,a){n=o[t]=[e,a]}));e.push(n[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,a[1](d)}o[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"22bc":function(t,e,a){t.exports=a.p+"img/icon_vanilla.1c9b3430.png"},"294d":function(t,e,a){"use strict";a("9ea8")},"3db6":function(t,e,a){t.exports=a.p+"img/vanilla_white.34deb758.png"},4396:function(t,e,a){t.exports=a.p+"img/BPMConseil.0f4f5753.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"grey lighten-4"},[t.loaded?a("div",[a("Navbar"),a("v-main",{staticClass:"mx-4 pb-15"},[a("router-view")],1),a("Footer")],1):a("div",[a("v-overlay",{attrs:{opacity:"1",value:"true"}},[t.loadingCircular?a("v-progress-circular",{attrs:{indeterminate:"",size:"100"}},[t._v(" "+t._s(t.loadingMsg)+" ")]):a("div",{staticClass:"ma-5"},[t._v(" "+t._s(t.loadingMsg)+" ")])],1)],1)])},o=[],i=a("b85c"),s=(a("d3b7"),a("820e"),a("3ca3"),a("ddb0"),a("7db0"),a("b0c0"),a("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("v-app-bar",{staticClass:"indigo",attrs:{flat:""}},[n("v-app-bar-nav-icon",{staticClass:"white--text",on:{click:function(e){t.drawer=!t.drawer}}}),n("v-toolbar-title",{staticClass:"text-uppercase white--text"},[n("span",{staticClass:"font-weight-light"},[t._v("VANILLA")]),n("span",[t._v(" KPI USER")])]),n("v-spacer"),n("v-toolbar-title",{staticClass:"text-uppercase white--text"},[n("span",{staticClass:"font-weight-light"},[t._v("Connecté en tant que : ")]),n("span",[t._v(" "+t._s(t.name()))])]),n("v-spacer"),n("v-btn",{staticClass:"mx-3",attrs:{dark:"",text:"",rounded:""},on:{click:t.logout}},[t._v("Déconnexion")]),n("v-btn",{staticClass:"mx-3",attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"https://semaphore-vanilla.data4citizen.com/vanilla"}},[n("v-img",{attrs:{contain:"","max-height":"100","max-width":"120",src:a("3db6")}}),n("v-icon",{staticClass:"ml-1 mt-1",attrs:{medium:"",color:"white"}},[t._v("mdi-open-in-new")])],1)],1),n("v-navigation-drawer",{staticClass:"indigo",attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-layout",{attrs:{column:"","align-center":""}},[n("v-flex",{staticClass:"mt-5"},[n("v-avatar",{attrs:{size:"100"}},[n("img",{attrs:{src:a("22bc")}})])],1)],1),n("v-list",t._l(t.links,(function(e){return n("v-list-item",{key:e.text,attrs:{to:e.route}},[n("v-list-item-action",[n("v-icon",{staticClass:"white--text"},[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"white--text"},[t._v(t._s(e.text))])],1)],1)})),1)],1)],1)}),c=[],u={name:"Navbar",data:function(){return{drawer:!1,links:[{icon:"mdi-chart-bell-curve",text:"Charts",route:"/"}]}},methods:{logout:function(){n["a"].$keycloak.logout({redirectUri:window.location.origin})},name:function(){return n["a"].$keycloak.tokenParsed.preferred_username}}},l=u,d=a("2877"),f=a("6544"),p=a.n(f),m=a("40dc"),h=a("5bc1"),g=a("8212"),v=a("8336"),E=a("0e8f"),b=a("132d"),_=a("adda"),k=a("a722"),I=a("8860"),C=a("da13"),T=a("1800"),x=a("5d23"),y=a("f774"),w=a("2fa4"),A=a("2a7f"),O=Object(d["a"])(l,s,c,!1,null,null,null),P=O.exports;p()(O,{VAppBar:m["a"],VAppBarNavIcon:h["a"],VAvatar:g["a"],VBtn:v["a"],VFlex:E["a"],VIcon:b["a"],VImg:_["a"],VLayout:k["a"],VList:I["a"],VListItem:C["a"],VListItemAction:T["a"],VListItemContent:x["a"],VListItemTitle:x["b"],VNavigationDrawer:y["a"],VSpacer:w["a"],VToolbarTitle:A["a"]});var H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{id:"dashboard-core-footer",height:"60",absolute:"",padless:""}},[n("v-container",[n("v-row",{attrs:{align:"left","no-gutters":""}},[n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{attrs:{icon:"",color:"primary",to:"/"}},[n("v-icon",{attrs:{size:"24px"}},[t._v("mdi-home")])],1)],1),n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"https://semaphore-vanilla.data4citizen.com/vanilla"}},[n("v-img",{attrs:{"max-height":"24","max-width":"90",src:a("f9c4")}})],1)],1),n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{staticClass:"ma-0",attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"http://www.bpm-conseil.com/fr"}},[n("v-img",{attrs:{"max-height":"24","max-width":"90",src:a("4396")}})],1)],1),n("v-spacer",{staticClass:"hidden-sm-and-down"}),n("v-col",{attrs:{cols:"12",md:"auto"}},[n("div",{staticClass:"body-1 font-weight-light pt-6 pt-md-0 text-center"},[t._v(" Copyright © BPM-Conseil, 2013 - "+t._s((new Date).getFullYear())+". ")])])],1)],1)],1)},F=[],L={name:"Footer"},U=L,V=(a("294d"),a("62ad")),S=a("a523"),D=a("553a"),N=a("0fd9"),B=Object(d["a"])(U,H,F,!1,null,null,null),K=B.exports;p()(B,{VBtn:v["a"],VCol:V["a"],VContainer:S["a"],VFooter:D["a"],VIcon:b["a"],VImg:_["a"],VRow:N["a"],VSpacer:w["a"]});var R={name:"App",components:{Navbar:P,Footer:K},props:["keycloak"],data:function(){return{loaded:!1,loadingMsg:"Loading...",loadingCircular:!0}},beforeMount:function(){var t=this;this.manageKeycloakUser().then((function(){t.appLoadData()}))},methods:{appLoadData:function(){var t=this,e=n["a"].$keycloak.tokenParsed.preferred_username;this.$store.dispatch("getUser",e).then((function(){t.$store.dispatch("getGroups").then((function(){t.loaded=!0}))})).catch((function(){t.loadingMsg="Impossible d'établir la connexion au serveur, veuillez rafraichir la page ou contacter l'administrateur.",t.loadingCircular=!1}))},manageKeycloakUser:function(){var t=this,e=n["a"].$keycloak.tokenParsed.preferred_username,a=n["a"].$keycloak.tokenParsed.groups;return new Promise((function(r){t.$store.dispatch("getAllGroups").then((function(o){var s=o;t.$store.dispatch("getUserGroups",{userLogin:e}).then((function(n){var o,c=n,u=[],l=Object(i["a"])(a);try{var d=function(){var a=o.value;f=c.find((function(t){return t.name==a})),void 0==f?u.push(t.$store.dispatch("addUserToGroup",{userLogin:e,group:s.find((function(t){return t.name==a}))})):c.splice(c.indexOf(f),1)};for(l.s();!(o=l.n()).done;){var f;d()}}catch(g){l.e(g)}finally{l.f()}if(c.length>0){var p,m=Object(i["a"])(c);try{for(m.s();!(p=m.n()).done;){var h=p.value;u.push(t.$store.dispatch("removeUserFromGroup",{userLogin:e,group:h}))}}catch(g){m.e(g)}finally{m.f()}}Promise.allSettled(u).then((function(){r()}))})).catch((function(o){if("User not found."==o){var c={name:e,login:e,password:"Default",mail:n["a"].$keycloak.tokenParsed.email},u=[];t.$store.dispatch("addUser",c).then((function(){var n,o=Object(i["a"])(a);try{var c=function(){var a=n.value;u.push(t.$store.dispatch("addUserToGroup",{userLogin:e,group:s.find((function(t){return t.name==a}))}))};for(o.s();!(n=o.n()).done;)c()}catch(l){o.e(l)}finally{o.f()}Promise.allSettled(u).then((function(){r()}))}))}}))}))}))}}},$=R,j=a("7496"),M=a("f6c4"),X=a("a797"),G=a("490a"),z=Object(d["a"])($,r,o,!1,null,null,null),Y=z.exports;p()(z,{VApp:j["a"],VMain:M["a"],VOverlay:X["a"],VProgressCircular:G["a"]});a("25f0"),a("fb6a");var q=a("8c4f");n["a"].use(q["a"]);var J=[{path:"/",name:"Home",component:function(){return Promise.all([a.e("chunk-3d36b970"),a.e("about")]).then(a.bind(null,"bb51"))},meta:{isAuthenticated:!0}},{path:"/unauthorized",name:"Unauthorized",meta:{isAuthenticated:!1},component:function(){return a.e("chunk-2d2383f8").then(a.bind(null,"ff24"))}},{path:"/portail/:groupID/:kpiID",name:"portail",meta:{isAuthenticated:!0},component:function(){return Promise.all([a.e("chunk-3d36b970"),a.e("chunk-079c01bc")]).then(a.bind(null,"b75e"))}}],Q=new q["a"]({routes:J});Q.beforeEach((function(t,e,a){if(t.meta.isAuthenticated){var r=window.location.toString();n["a"].$keycloak.authenticated?n["a"].$keycloak.hasResourceRole("acces-kpi")?n["a"].$keycloak.updateToken(70).then((function(){a()})).catch((function(t){console.error(t)})):a({name:"Unauthorized"}):n["a"].$keycloak.login({redirectUri:r.slice(0,-1)+t.path})}else a()}));var W=Q,Z=a("1da1"),tt=(a("96cf"),a("159b"),a("4de4"),a("99af"),a("4e827"),a("ac1f"),a("1276"),a("caad"),a("2532"),a("2f62")),et=a("bc3a"),at=a.n(et),nt=a("7dc5");at.a.defaults.baseURL=nt.baseURL,at.a.defaults.headers.common["X-Gravitee-Api-Key"]="f3510842-ef9b-4ee7-8877-4d59b5d63907",n["a"].use(tt["a"]);var rt=new tt["a"].Store({state:{users:{name:"Utilisateurs",data:[]},groups:{name:"Groupes",data:[]},observatories:{name:"Observatoires",data:[]},themes:{name:"Themes",data:[]},kpi:{name:"KPI",data:[]},axis:{name:"axes",data:[]},axisvalues:{name:"axesvalues",data:[]},temp:{name:"temporaire",data:[]},childrenid:{name:"childrenID",data:[]},kpioraxis:{name:"KPI or axis",data:"KPI"},tabvalueoneyear:{name:"Tab value one year",data:[]},boolniveau:{name:"boolniveau",data:!1},tabniveau:{name:"tabniveau",data:[]},hidedata:{name:"hide data",data:[]},typechart:{name:"typechart",data:"Barchart"}},mutations:{FETCH_USERS:function(t,e){t.users.data=e},FETCH_GROUPS:function(t,e){t.groups.data=e},FETCH_OBSERVATORIES:function(t,e){t.observatories.data=e},FETCH_THEMES:function(t,e){t.themes.data=e},FETCH_KPI:function(t,e){t.kpi.data=e},FETCH_AXIS:function(t,e){t.axis.data=e},FETCH_AXIS_VALUES:function(t,e){t.axisvalues.data=e},FETCH_TEMP:function(t,e){t.temp.data=e},FETCH_CHILDRENID:function(t,e){t.childrenid.data=e},FETCH_KPI_OR_AXIS:function(t,e){t.kpioraxis.data=e},FETCH_TAB_VALUE_ONE_YEAR:function(t,e){t.tabvalueoneyear.data=e},FETCH_BOOLNIVEAU:function(t,e){t.boolniveau.data=e},FETCH_TABNIVEAU:function(t,e){t.tabniveau.data=e},FETCH_HIDE_DATA:function(t,e){t.hidedata.data=e},FETCH_TYPECHART:function(t,e){t.typechart.data=e}},actions:{getObservatories:function(t,e){var a=t.commit,n=this.groups.data.find((function(t){return t.name===e})).id,r=[];at.a.get("/group/".concat(n,"/observatories")).then((function(t){t.data.result.forEach((function(t){r.some((function(e){return e.id==t.id}))||r.push(t)}))})).catch((function(t){console.log("Error retrieving repositories : "+t.response.data.message)})),a("FETCH_OBSERVATORIES",r),a("FETCH_AXIS",[]),a("FETCH_BOOLNIVEAU",!1)},getGroups:function(t){var e=t.commit,a=t.getters,n=a.users;return new Promise((function(t,a){at.a.get("/user/".concat(n[0].name,"/groups")).then((function(a){e("FETCH_GROUPS",a.data.result),e("FETCH_BOOLNIVEAU",!1),t(a.data.result)})).catch((function(t){console.log("Error retrieving groups : "+t.response.data.message),a(t)}))}))},getTheme:function(t,e){var a=t.commit,n=this.groups.data.find((function(t){return t.name===e})).id,r=[];at.a.get("/group/".concat(n,"/themes")).then((function(t){t.data.result.forEach((function(t){r.some((function(e){return e.id==t.id}))||r.push(t)}))})).catch((function(t){console.log("Error retrieving repositories : "+t.response.data.message)})),a("FETCH_THEMES",r),a("FETCH_AXIS",[]),a("FETCH_BOOLNIVEAU",!1)},getThemeByObs:function(t,e){var a=t.commit,n=t.getters,r=n.observatories,o=r.filter((function(t){return t.name==e})),i=[];void 0!==o[0]&&(at.a.get("/observatory/".concat(o[0].id,"/themes")).then((function(t){t.data.result.forEach((function(t){i.some((function(e){return e.id==t.id}))||i.push(t)}))})).catch((function(t){console.log("Error retrieving repositories : "+t.response.data.message)})),a("FETCH_THEMES",i),a("FETCH_BOOLNIVEAU",!1),a("FETCH_AXIS",[]))},getKPI:function(t,e){var a=t.commit,n=e.group,r=e.theme,o=e.themes,i=this.groups.data.find((function(t){return t.name===n})).id;return new Promise((function(t,e){var n=[],s=o.filter((function(t){return t.name==r}));s.forEach((function(t){for(var e=function(e){n.some((function(a){return a.kpiID==t.metrics[e].kpiID}))||n.push(t.metrics[e])},a=0;a<t.metrics.length;a++)e(a)}));var c=[];n.forEach((function(t){t.result=[],c.push(at.a.get("/group/".concat(i,"/kpi/").concat(t.kpiID,"/values")).then((function(e){t.result.push(e.data.result)})).catch((function(t){console.log("Error retrieving KPI : "+t.response.data.message)})))})),Promise.all(c).then((function(){n.forEach((function(t){t.result[0].sort((function(t,e){return new Date(e.date)-new Date(t.date)}))})),console.log(n),a("FETCH_KPI",n),a("FETCH_KPI_OR_AXIS","KPI"),a("FETCH_BOOLNIVEAU",!1),a("FETCH_AXIS",[]),t()})).catch((function(){e()}))}))},getTabValueOneYear:function(t,e){var a=this,n=t.commit,r=t.getters,o=e.kpiID,i=e.date,s=i.split("-"),c="01-12-"+s[0],u=r.temp;return new Promise((function(t,e){var r=[],i=u.themes.filter((function(t){return t.name==u.theme}));i.forEach((function(t){for(var e=function(e){!r.some((function(a){return a.kpiID==t.metrics[e].kpiID}))&t.metrics[e].kpiID==o&&r.push(t.metrics[e])},a=0;a<t.metrics.length;a++)e(a)}));var s=[],l=a.groups.data.find((function(t){return t.name===u.group})).id;r.forEach((function(t){t.result=[],s.push(at.a.get("/group/".concat(l,"/kpi/").concat(t.kpiID,"/values?date=").concat(c)).then((function(e){t.result.push(e.data.result)})).catch((function(t){console.log("Error retrieving KPI : "+t.response.data.message)})))})),Promise.all(s).then((function(){r.forEach((function(t){t.result.sort((function(t,e){return new Date(t.date)-new Date(e.date)}))})),n("FETCH_TAB_VALUE_ONE_YEAR",r),n("FETCH_BOOLNIVEAU",!1),t()})).catch((function(){e()}))}))},getOneKPI:function(t,e){var a=this,n=t.commit,r=t.getters,o=e.kpiID,i=e.date,s=i.split("-"),c=s[2]+"-"+s[1]+"-"+s[0],u=r.temp;return new Promise((function(t,e){var r=[],i=u.themes.filter((function(t){return t.name==u.theme}));i.forEach((function(t){for(var e=function(e){!r.some((function(a){return a.kpiID==t.metrics[e].kpiID}))&t.metrics[e].kpiID==o&&r.push(t.metrics[e])},a=0;a<t.metrics.length;a++)e(a)}));var s=[],l=a.groups.data.find((function(t){return t.name===u.group})).id;r.forEach((function(t){t.result=[],s.push(at.a.get("/group/".concat(l,"/kpi/").concat(t.kpiID,"/value?date=").concat(c)).then((function(e){t.result.push(e.data.result)})).catch((function(t){console.log("Error retrieving KPI : "+t.response.data.message)})))})),Promise.all(s).then((function(){r.forEach((function(t){var e=t.result[0];t.result[0]=[],t.result[0].push(e)})),console.log(r),n("FETCH_KPI",r),n("FETCH_KPI_OR_AXIS","KPI"),n("FETCH_BOOLNIVEAU",!1),t()})).catch((function(){e()}))}))},resetKPI:function(t){var e=t.getters,a=e.temp,n={group:a.group,theme:a.theme,themes:a.themes};this.dispatch("getKPI",n)},tempData:function(t,e){var a=t.commit;a("FETCH_TEMP",e)},getKPIDate:function(t,e){var a=this,n=t.commit,r=t.getters,o=e.split("-"),i=o[2]+"-"+o[1]+"-"+o[0],s=r.temp;return new Promise((function(t,e){var r=[],o=s.themes.filter((function(t){return t.name==s.theme}));o.forEach((function(t){for(var e=function(e){r.some((function(a){return a.kpiID==t.metrics[e].kpiID}))||r.push(t.metrics[e])},a=0;a<t.metrics.length;a++)e(a)}));var c=[],u=a.groups.data.find((function(t){return t.name===s.group})).id;r.forEach((function(t){t.result=[],c.push(at.a.get("/group/".concat(u,"/kpi/").concat(t.kpiID,"/value?date=").concat(i)).then((function(e){t.result.push(e.data.result)})).catch((function(t){console.log("Error retrieving KPI : "+t.response.data.message)})))})),Promise.all(c).then((function(){r.forEach((function(t){var e=t.result[0];t.result[0]=[],t.result[0].push(e)})),n("FETCH_KPI",r),n("FETCH_KPI_OR_AXIS","KPI"),n("FETCH_BOOLNIVEAU",!1),n("FETCH_AXIS",[]),t()})).catch((function(){e()}))}))},getallAxis:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,at.a.get("/axis").then((function(t){a("FETCH_AXIS",t.data.result),a("FETCH_BOOLNIVEAU",!1)})).catch((function(t){console.log("Error retrieving axis : "+t.response.data.message)}));case 3:case"end":return e.stop()}}),e)})))()},getAxis:function(t,e){var a=t.commit;at.a.get("/kpi/".concat(e,"/axis")).then((function(t){a("FETCH_AXIS",t.data.result),a("FETCH_BOOLNIVEAU",!1)})).catch((function(t){console.log("Error retrieving axis : "+t.response.data.message)}))},getAxisValue:function(t,e){var a=this,n=t.commit,r=t.getters,o=e.kpiID,i=e.childrenID,s=e.date,c=r.temp;n("FETCH_CHILDRENID",i);var u,l=s.split("-"),d=l[2]+"-"+l[1]+"-"+l[0],f=r.axis;f.forEach((function(t){t.children.forEach((function(e){e.id==i&&(u=t.id)}))}));var p=this.groups.data.find((function(t){return t.name===c.group})).id;at.a.get("/group/".concat(p,"/kpi/").concat(o,"/axis/").concat(u,"/value?date=").concat(d)).then((function(t){console.log("hello ",t.data.result),a.commit("FETCH_AXIS_VALUES",t.data.result);var e=r.axis;e.forEach((function(e){e.id==u&&(e.children[0].children=[],e.children[0].children.push({id:e.children[0].id,name:e.children[0].name}),t.data.result.forEach((function(t){console.log(t.axis[0]),e.children[0].children.find((function(e){return e.name===t.axis[0].label}))||e.children[0].children.push({id:t.axis[0].label,name:t.axis[0].label})})))})),console.log(e),n("FETCH_KPI_OR_AXIS","AXIS"),n("FETCH_BOOLNIVEAU",!1)})).catch((function(t){console.log("Error retrieving axis values : "+t.response.data.message)}))},niveaudeux:function(t,e){var a=t.commit;console.log(e),a("FETCH_BOOLNIVEAU",!0)},getTabNiveau:function(t,e){var a=t.commit,n=t.getters,r=n.axisvalues,o=[];console.log("ici ",r),r.forEach((function(t){t.axis[0].label==e&&(console.log(t.axis[0].label),console.log(t.axis[1].label),o.push(t))})),a("FETCH_TABNIVEAU",o),console.log(this.state.tabniveau)},getHideData:function(t,e){var a=t.commit,n=t.getters,r=e.cacher,o=e.name,i=e.id,s=n.hidedata,c=0;s.forEach((function(t){t.id==i&&(t.cacher=r,c+=1)})),0==c&&s.push({cacher:r,name:o,id:i}),a("FETCH_HIDE_DATA",s)},getTypechart:function(t,e){var a=t.commit;a("FETCH_TYPECHART",e)},getUser:function(t,e){var a=t.commit,n=[{name:e}];a("FETCH_USERS",n)},addUserToGroup:function(t,e){var a=t.state,n=e.userLogin,r=e.group,o={userLogin:n,groupID:r.id};return new Promise((function(t,e){at.a.post("/user/group/add",o,{}).then((function(e){"success"===e.data.status&&(a.groups.data.push(r.name),t("L'utilisateur ".concat(n," a été ajouté au groupe ").concat(r.name,".")))})).catch((function(t){t.response&&console.log("Error adding user ".concat(n," to ").concat(r.name,"  : ")+t.response.data.message),e("Erreur lors de l'ajout de ".concat(n," à ").concat(r.name,"."))}))}))},removeUserFromGroup:function(t,e){var a=t.state,n=e.userLogin,r=e.group,o={userLogin:n,groupID:r.id};return new Promise((function(t,e){at.a.post("/user/group/remove",o,{}).then((function(e){-1!=a.groups.data.indexOf(r.name)&&a.groups.data.splice(a.groups.data.indexOf(r.name),1),"success"===e.data.status&&t("L'utilisateur ".concat(n," a été retiré du groupe ").concat(r.name,"."))})).catch((function(t){t.response&&console.log("Erreur lors du retrait de l'utilisateur ".concat(n," du groupe ").concat(r.name,"  : ")+t.response.data.message),e("Erreur lors du retrait de l'utilisateur ".concat(n," du groupe ").concat(r.name,"."))}))}))},addUser:function(t,e){var a=t.state;return new Promise((function(t,n){a.userLogin=e.login,at.a.post("/user/create",e,{}).then((function(a){"success"===a.data.status&&t("L'utilisateur ".concat(e.login," a été crée."))})).catch((function(t){t.response?console.log("Error adding user ".concat(e.login," : ").concat(t.response.data.message)):console.log("Error adding user ".concat(e.login," : ").concat(t)),n("Erreur lors de la création de l'utilisateur ".concat(e.login,"."))}))}))},getUserGroups:function(t,e){var a=t.state,n=e.userLogin;return new Promise((function(t,e){at.a.get("/user/".concat(n,"/groups")).then((function(e){if("success"==e.data.status){var r=[];e.data.result.forEach((function(t){return r.push(t.name)})),a.userLogin=n}t(e.data.result)})).catch((function(t){t.response?t.response.data.message.includes("User not found.")&&e("User not found."):console.log("Unable to retrieve groups : "+t),e(t)}))}))},getAllGroups:function(t){var e=t.commit;return new Promise((function(t,a){at.a.get("/groups").then((function(a){"success"==a.data.status&&e("SET_GROUPS",[]),t(a.data.result)})).catch((function(t){t.reponse?console.log("Unable to retrieve groups message : "+t.response.data.message):console.log("Unable to retrieve groups : "+t),a(t)}))}))}},getters:{users:function(t){return t.users.data},groups:function(t){return t.groups.data},observatories:function(t){return t.observatories.data},themes:function(t){return t.themes.data},kpi:function(t){return t.kpi.data},axis:function(t){return t.axis.data},axisvalues:function(t){return t.axisvalues.data},temp:function(t){return t.temp.data},childrenid:function(t){return t.childrenid.data},kpioraxis:function(t){return t.kpioraxis.data},tabvalueoneyear:function(t){return t.tabvalueoneyear.data},boolniveau:function(t){return t.boolniveau.data},tabniveau:function(t){return t.tabniveau.data},hidedata:function(t){return t.hidedata.data},typechart:function(t){return t.typechart.data}},modules:{}}),ot=a("f309");n["a"].use(ot["a"]);var it=new ot["a"]({}),st=a("68ad"),ct=a.n(st),ut={url:"https://semaphore-keycloak2.data4citizen.com/auth/",realm:"Vanilla7",clientId:"kpi"},lt=ct()(ut),dt={install:function(t){t.$keycloak=lt}};dt.install=function(t){t.$keycloak=lt,Object.defineProperties(t.prototype,{$keycloak:{get:function(){return lt}}})},n["a"].use(dt);var ft=dt;n["a"].config.productionTip=!1,n["a"].use(ft),n["a"].$keycloak.init({onLoad:"login-required",checkLoginIframe:!1}).then((function(){new n["a"]({router:W,store:rt,vuetify:it,render:function(t){return t(Y)}}).$mount("#app")}))},"7dc5":function(t){t.exports=JSON.parse('{"baseURL":"https://semaphore-gravitee-gateway.data4citizen.com/vanilla-api"}')},"9ea8":function(t,e,a){},f9c4:function(t,e,a){t.exports=a.p+"img/vanilla.6e506a77.png"}});
//# sourceMappingURL=app.74b18fbc.js.map