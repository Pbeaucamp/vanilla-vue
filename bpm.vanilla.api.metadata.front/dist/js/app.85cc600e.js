(function(e){function a(a){for(var n,o,c=a[0],i=a[1],l=a[2],d=0,m=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(a);while(m.length)m.shift()();return s.push.apply(s,l||[]),t()}function t(){for(var e,a=0;a<s.length;a++){for(var t=s[a],n=!0,c=1;c<t.length;c++){var i=t[c];0!==r[i]&&(n=!1)}n&&(s.splice(a--,1),e=o(o.s=t[0]))}return e}var n={},r={app:0},s=[];function o(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=n,o.d=function(e,a,t){o.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,a){if(1&a&&(e=o(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)o.d(t,n,function(a){return e[a]}.bind(null,n));return t},o.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(a,"a",a),a},o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=a,c=c.slice();for(var l=0;l<c.length;l++)a(c[l]);var u=i;s.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"09e0":function(e,a,t){},1014:function(e,a,t){"use strict";t("1ee2")},"1ee2":function(e,a,t){},"20ca":function(e,a,t){},"22bc":function(e,a,t){e.exports=t.p+"img/icon_vanilla.1c9b3430.png"},"294d":function(e,a,t){"use strict";t("9ea8")},"2b56":function(e,a,t){"use strict";t("09e0")},"3db6":function(e,a,t){e.exports=t.p+"img/vanilla_white.34deb758.png"},4396:function(e,a,t){e.exports=t.p+"img/BPMConseil.0f4f5753.png"},4678:function(e,a,t){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var a=s(e);return t(a)}function s(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="4678"},"56d7":function(e,a,t){"use strict";t.r(a);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-app",{staticClass:"grey lighten-4"},[e.loaded?t("div",[t("Navbar"),t("v-main",{staticClass:"mx-4 mb-4 pb-15"},[t("router-view")],1),e._l(e.snackbars.data,(function(a,n){return t("v-snackbar",{key:a.id,style:"bottom: "+(4*n+1)+"em",attrs:{right:"",rounded:"pill",color:a.color,timeout:"5000"},scopedSlots:e._u([{key:"action",fn:function(n){var r=n.attrs;return[t("v-btn",e._b({attrs:{icon:"",text:""},on:{click:function(t){return e.removeSnackbar(a)}}},"v-btn",r,!1),[t("v-icon",[e._v(" mdi-close-circle ")])],1)]}}],null,!0),model:{value:a.aff,callback:function(t){e.$set(a,"aff",t)},expression:"snackbar.aff"}},[e._v(" "+e._s(a.text)+" ")])})),t("Footer")],2):e._e(),e.loaded||""==e.groups.selected?t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialogGroup,callback:function(a){e.dialogGroup=a},expression:"dialogGroup"}},[t("v-card",[t("v-card-title",[t("h2",{staticClass:"subheading grey--text"},[e._v("Choisir un groupe")])]),t("v-card-text",[t("v-container",[t("v-row",[t("v-select",{staticClass:"mx-2",attrs:{items:this.groups.data,"item-text":"name",label:"Groupes",outlined:""},model:{value:e.group,callback:function(a){e.group=a},expression:"group"}})],1)],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"success"},on:{click:e.selectGroup}},[e._v("Confirmer")])],1)],1)],1):t("div",[t("v-overlay",{attrs:{opacity:"1",value:"true"}},[e.loadingCircular?t("v-progress-circular",{attrs:{indeterminate:"",size:"100"}},[e._v(" "+e._s(e.loadingMsg)+" ")]):t("div",{staticClass:"ma-5"},[e._v(" "+e._s(e.loadingMsg)+" ")])],1)],1)],1)},s=[],o=t("b85c"),c=t("5530"),i=(t("d3b7"),t("3ca3"),t("ddb0"),t("7db0"),t("b0c0"),t("a434"),function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("nav",[n("v-app-bar",{staticClass:"indigo",attrs:{flat:""}},[n("v-app-bar-nav-icon",{staticClass:"white--text",on:{click:function(a){e.drawer=!e.drawer}}}),n("v-toolbar-title",{staticClass:"text-uppercase white--text"},[n("span",{staticClass:"font-weight-light"},[e._v("VANILLA")]),n("span",[e._v(" METADATA")])]),n("v-spacer"),n("v-btn",{staticClass:"mx-3",attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"https://semaphore-vanilla.data4citizen.com/vanilla"}},[n("v-img",{attrs:{contain:"","max-height":"100","max-width":"120",src:t("3db6")}}),n("v-icon",{staticClass:"ml-1 mt-1",attrs:{medium:"",color:"white"}},[e._v("mdi-open-in-new")])],1)],1),n("v-navigation-drawer",{staticClass:"indigo",attrs:{app:"",temporary:""},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-list",[n("v-list-item",{on:{click:e.logout}},[n("v-list-item-action",[n("v-icon",{staticClass:"white--text"},[e._v("mdi-logout-variant")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"white--text"},[e._v("Déconnexion")])],1)],1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(a){e.drawer=a},expression:"drawer"}},[n("v-layout",{attrs:{column:"","align-center":""}},[n("v-flex",{staticClass:"mt-5"},[n("v-avatar",{attrs:{size:"100"}},[n("img",{attrs:{src:t("22bc")}})])],1),n("h3",{staticClass:"white--text"},[e._v(e._s(e.userName))])],1),n("v-list",e._l(e.links,(function(a){return n("v-list-item",{key:a.text,attrs:{to:a.route}},[n("v-list-item-action",[n("v-icon",{staticClass:"white--text"},[e._v(e._s(a.icon))])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"white--text"},[e._v(e._s(a.text))])],1)],1)})),1)],1)],1)}),l=[],u={name:"Navbar",data:function(){return{drawer:!1,links:[{icon:"mdi-view-dashboard",text:"Dashboard",route:"/"}]}},computed:{userName:function(){return n["a"].$keycloak.tokenParsed.preferred_username}},methods:{logout:function(){n["a"].$keycloak.logout({redirectUri:window.location.origin})}}},d=u,m=t("2877"),f=t("6544"),p=t.n(f),v=t("40dc"),h=t("5bc1"),b=t("8212"),g=t("8336"),y=t("0e8f"),k=t("132d"),C=t("adda"),x=t("a722"),_=t("8860"),S=t("da13"),j=t("1800"),E=t("5d23"),A=t("f774"),N=t("2fa4"),T=t("2a7f"),w=Object(m["a"])(d,i,l,!1,null,null,null),O=w.exports;p()(w,{VAppBar:v["a"],VAppBarNavIcon:h["a"],VAvatar:b["a"],VBtn:g["a"],VFlex:y["a"],VIcon:k["a"],VImg:C["a"],VLayout:x["a"],VList:_["a"],VListItem:S["a"],VListItemAction:j["a"],VListItemContent:E["a"],VListItemTitle:E["b"],VNavigationDrawer:A["a"],VSpacer:N["a"],VToolbarTitle:T["a"]});var D=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("v-footer",{attrs:{id:"dashboard-core-footer",height:"60",absolute:"",padless:""}},[n("v-container",[n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.bottom_redirect_btn.visible,expression:"$store.state.bottom_redirect_btn.visible"}],attrs:{icon:"",color:"primary"},on:{click:function(a){return e.$store.dispatch("clickBottomBtn")}}},[n("v-icon",{attrs:{size:"24px"}},[e._v("mdi-step-backward")])],1)],1),n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{attrs:{icon:"",color:"primary",to:"/"}},[n("v-icon",{attrs:{size:"24px"}},[e._v("mdi-home")])],1)],1),n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"https://semaphore-vanilla.data4citizen.com/vanilla"}},[n("v-img",{attrs:{"max-height":"24","max-width":"90",src:t("f9c4")}})],1)],1),n("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[n("v-btn",{staticClass:"ma-0",attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"http://www.bpm-conseil.com/fr"}},[n("v-img",{attrs:{"max-height":"24","max-width":"90",src:t("4396")}})],1)],1),n("v-spacer",{staticClass:"hidden-sm-and-down"}),n("v-col",{attrs:{cols:"12",md:"auto"}},[n("div",{staticClass:"body-1 font-weight-light pt-6 pt-md-0 text-center"},[e._v(" Copyright © BPM-Conseil, 2013 - "+e._s((new Date).getFullYear())+". ")])])],1)],1)],1)},L=[],q={name:"Footer"},V=q,R=(t("294d"),t("62ad")),M=t("a523"),Q=t("553a"),P=t("0fd9"),X=Object(m["a"])(V,D,L,!1,null,null,null),F=X.exports;p()(X,{VBtn:g["a"],VCol:R["a"],VContainer:M["a"],VFooter:Q["a"],VIcon:k["a"],VImg:C["a"],VRow:P["a"],VSpacer:N["a"]});var I=t("2f62"),U={name:"App",components:{Navbar:O,Footer:F},data:function(){return{loaded:!1,loadingMsg:"Loading...",loadingCircular:!0,group:"",dialogGroup:!0}},computed:Object(c["a"])({},Object(I["e"])(["snackbars","groups"])),beforeMount:function(){var e=this;this.manageKeycloakUser().then((function(){e.$store.dispatch("getUserGroups",{userLogin:n["a"].$keycloak.tokenParsed.preferred_username}).then((function(){void 0!=e.$route.params.groupName&&(e.group=e.$route.params.groupName,e.selectGroup())}))}))},methods:{removeSnackbar:function(e){this.$store.dispatch("removeSnackbar",e)},selectGroup:function(){""!=this.group&&(this.$store.commit("SELECT_GROUP",this.group),this.dialogGroup=!1,this.loadMetadatas())},loadMetadatas:function(){var e=this;this.$store.commit("SELECT_REPOSITORY","Vanilla"),this.$store.dispatch("getMetadata").then((function(){e.loaded=!0})).catch((function(e){console.log("error getting metadatas : "+e)}))},manageKeycloakUser:function(){var e=this,a=n["a"].$keycloak.tokenParsed.preferred_username,t=n["a"].$keycloak.tokenParsed.groups;return new Promise((function(r){e.$store.dispatch("getGroups").then((function(s){var c=s;e.$store.dispatch("getUserGroups",{userLogin:a}).then((function(n){var s,i=n,l=[],u=Object(o["a"])(t);try{var d=function(){var t=s.value;m=i.find((function(e){return e.name==t})),void 0==m?l.push(e.$store.dispatch("addUserToGroup",{userLogin:a,group:c.find((function(e){return e.name==t}))})):i.splice(i.indexOf(m),1)};for(u.s();!(s=u.n()).done;){var m;d()}}catch(h){u.e(h)}finally{u.f()}if(i.length>0){var f,p=Object(o["a"])(i);try{for(p.s();!(f=p.n()).done;){var v=f.value;l.push(e.$store.dispatch("removeUserFromGroup",{userLogin:a,group:v}))}}catch(h){p.e(h)}finally{p.f()}}Promise.all(l).then((function(){r()}))})).catch((function(s){if("User not found."==s){var i={name:a,login:a,password:"Default",mail:n["a"].$keycloak.tokenParsed.email},l=[];e.$store.dispatch("addUser",i).then((function(){var n,r=Object(o["a"])(t);try{var s=function(){var t=n.value;l.push(e.$store.dispatch("addUserToGroup",{userLogin:a,group:c.find((function(e){return e.name==t}))}))};for(r.s();!(n=r.n()).done;)s()}catch(i){r.e(i)}finally{r.f()}})),Promise.all(l).then((function(){r()}))}}))}))}))}},watch:{$route:{immediate:!0,handler:function(){document.title="Vanilla Metadata"}}}},B=U,$=t("7496"),z=t("b0af"),G=t("99d9"),K=t("169a"),Y=t("f6c4"),H=t("a797"),Z=t("490a"),J=t("b974"),W=t("2db4"),ee=Object(m["a"])(B,r,s,!1,null,null,null),ae=ee.exports;p()(ee,{VApp:$["a"],VBtn:g["a"],VCard:z["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:G["c"],VContainer:M["a"],VDialog:K["a"],VIcon:k["a"],VMain:Y["a"],VOverlay:H["a"],VProgressCircular:Z["a"],VRow:P["a"],VSelect:J["a"],VSnackbar:W["a"],VSpacer:N["a"]});var te=t("8c4f"),ne=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"dashboard"},[t("v-container",{staticClass:"my-5"},[t("List"),t("v-row",{attrs:{wrap:"",justify:"center"}},[e.affTreeview?t("v-col",{attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[t("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500",disabled:!e.tablesLoaded,loading:e.tablesLoading}},[t("v-sheet",{staticClass:"pa-4 primary lighten-1"},[t("v-container",{staticClass:"pa-2"},[t("v-row",[t("v-text-field",{attrs:{label:"Rechercher une table ou une colonne",dark:"",flat:"","solo-inverted":"","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),t("v-row",[t("v-checkbox",{attrs:{dark:"","hide-details":"",label:"Recherche sensible à la casse"},model:{value:e.caseSensitive,callback:function(a){e.caseSensitive=a},expression:"caseSensitive"}}),t("v-spacer"),t("v-btn",{staticClass:"mt-3 white--text",attrs:{icon:"",text:""},on:{click:function(a){e.affTreeview=!1}}},[t("v-icon",[e._v("mdi-format-horizontal-align-left")])],1)],1)],1)],1),t("v-card-text",[t("v-treeview",{attrs:{items:e.localTables,"item-key":"id","return-object":"",search:e.search,filter:e.filter,hoverable:"","open-on-click":"",rounded:"",selectable:"","selected-color":"primary","expand-icon":"","on-icon":"mdi-chevron-triple-left","off-icon":"mdi-chevron-triple-right","indeterminate-icon":"mdi-chevron-triple-right"},scopedSlots:e._u([{key:"prepend",fn:function(a){var n=a.item,r=a.open;return[n.file?t("v-icon",[e._v(" "+e._s(e.files[n.file])+" ")]):t("v-icon",[e._v(" "+e._s(r?"mdi-folder-open":"mdi-folder")+" ")])]}},{key:"label",fn:function(a){var n=a.item;return["MEASURE"==n.type?t("span",{staticClass:"indigo--text"},[e._v(e._s(n.name))]):"DIMENSION"==n.type?t("span",{staticClass:"green--text"},[e._v(e._s(n.name))]):t("span",{},[e._v(e._s(n.name))])]}}],null,!1,2745321480),model:{value:e.selectedColumns,callback:function(a){e.selectedColumns=a},expression:"selectedColumns"}})],1)],1)],1):e._e(),t("v-col",{attrs:{cols:"12",sm:"12",md:e.breakpointTreeview,lg:e.breakpointTreeview,xl:e.breakpointTreeview}},[t("v-card",[t("v-tabs",{attrs:{"background-color":"primary lighten-1",dark:"","icons-and-text":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("v-tabs-slider"),t("v-tab",{attrs:{href:"#query"}},[e._v(" Requête "),t("v-icon",[e._v("mdi-database-settings")])],1),t("v-tab",{attrs:{href:"#results",disabled:!(e.queryResult.length>0)}},[e._v(" Résultats "),t("v-icon",[e._v("mdi-clipboard-text-outline")])],1),t("v-tab",{attrs:{href:"#chart",disabled:!(e.queryResult.length>0)}},[e._v(" Graphiques "),t("v-icon",[e._v("mdi-chart-box-plus-outline")])],1)],1),t("v-speed-dial",{staticClass:"mt-4",attrs:{top:"",right:"",direction:"bottom",transition:"scale-transition",absolute:""},scopedSlots:e._u([{key:"activator",fn:function(){return[t("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.fab,callback:function(a){e.fab=a},expression:"fab"}},[e.fab?t("v-icon",[e._v(" mdi-close ")]):t("v-icon",[e._v(" mdi-database-edit ")])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(a){e.fab=a},expression:"fab"}},[t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,r=a.attrs;return[0!=e.selectedColumns.length?t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green darken-1"},on:{click:[function(a){return a.stopPropagation(),e.zoomOut(a)},function(a){e.dialogSaveQuery=!0}]}},"v-btn",r,!1),n),[t("v-icon",[e._v("mdi-content-save")])],1):e._e()]}}])},[t("span",[e._v("Sauvegarder")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,r=a.attrs;return[""!=e.packages.selected?t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green darken-1",loading:e.loadSaved},on:{click:[function(a){return a.stopPropagation(),e.zoomOut(a)},e.getSaved]}},"v-btn",r,!1),n),[t("v-icon",[e._v("mdi-cloud-download-outline")])],1):e._e()]}}])},[t("span",[e._v("Charger")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,r=a.attrs;return[0!=e.selectedColumns.length?t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green lighten-1",loading:e.loadSQL},on:{click:[function(a){return a.stopPropagation(),e.zoomOut(a)},e.getSQL]}},"v-btn",r,!1),n),[t("v-icon",[e._v("mdi-file-document-multiple-outline")])],1):e._e()]}}])},[t("span",[e._v("SQL")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,r=a.attrs;return[0!=e.selectedColumns.length?t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",loading:e.loadingQueryResult,color:"primary darken-1"},on:{click:[function(a){return a.stopPropagation(),e.zoomOut(a)},e.executeQuery]}},"v-btn",r,!1),n),[t("v-icon",[e._v("mdi-database-search")])],1):e._e()]}}])},[t("span",[e._v("Exécuter")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,r=a.attrs;return[t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"orange lighten-1"},on:{click:[function(a){return a.stopPropagation(),e.zoomOut(a)},function(a){e.selectedColumns=[]}]}},"v-btn",r,!1),n),[t("v-icon",[e._v("mdi-delete")])],1)]}}])},[t("span",[e._v("Réinitialiser")])]),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,r=a.attrs;return[e.affTreeview?e._e():t("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green darken-1"},on:{click:[function(a){return a.stopPropagation(),e.zoomOut(a)},function(a){e.affTreeview=!0}]}},"v-btn",r,!1),n),[t("v-icon",[e._v("mdi-file-tree-outline")])],1)]}}])},[t("span",[e._v("Afficher les colonnes")])])],1),t("v-tabs-items",{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("v-tab-item",{attrs:{value:"query"}},[t("v-data-table",{staticClass:"elevation-1",attrs:{flat:"",headers:e.headers,items:e.selectedColumns,"hide-default-footer":e.selectedColumns.length<10,search:e.search,"footer-props":{"items-per-page-text":"Colonnes par page","page-text":"{0} à {1} sur {2}"},"no-results-text":"Aucun résultat."},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-container",[t("v-row",[t("v-col",{staticClass:"mx-4",attrs:{cols:"12",sm:"12",md:"12",xl:"5"}},[t("h1",{staticClass:"subheading grey--text"},[e._v("Création de requête")])]),t("v-spacer"),t("v-col",[t("v-row",{},[t("v-col",{staticClass:"ml-1"},[t("v-checkbox",{attrs:{label:"Distincte"},model:{value:e.queryDistinct,callback:function(a){e.queryDistinct=a},expression:"queryDistinct"}})],1),t("v-col",{staticClass:"mr-3"},[t("v-text-field",{staticClass:"ml-2",attrs:{label:"Limite",type:"number",min:"0"},model:{value:e.queryLimit,callback:function(a){e.queryLimit=a},expression:"queryLimit"}})],1),t("v-col")],1)],1)],1)],1)]},proxy:!0}])})],1),t("v-tab-item",{attrs:{value:"results"}},[t("v-data-table",{staticClass:"elevation-1",attrs:{flat:"",headers:e.resultHeaders,items:e.queryResult,"hide-default-footer":e.queryResult.length<10,search:e.search,"footer-props":{"items-per-page-text":"Résultats par page","page-text":"{0} à {1} sur {2}"},"no-results-text":"Aucun résultat."},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-container",[t("v-row",{staticClass:"ma-2"},[t("h1",{staticClass:"subheading grey--text"},[e._v("Résultats de la requête")]),t("v-spacer")],1)],1)]},proxy:!0}])})],1),t("v-tab-item",{attrs:{value:"chart"}},[t("Chart",{attrs:{selectedColumns:e.selectedColumns,affTreeview:e.affTreeview}})],1),t("v-tab-item",{attrs:{value:"relations"}},[e._v(" Empty ")])],1)],1)],1)],1),t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialogSaveQuery,callback:function(a){e.dialogSaveQuery=a},expression:"dialogSaveQuery"}},[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t("v-card",[t("v-card-title",[t("h2",{staticClass:"subheading grey--text"},[e._v("Sauvegarder une requête")])]),t("v-card-text",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{rules:e.nameRules,label:"Nom",required:""},model:{value:e.queryName,callback:function(a){e.queryName=a},expression:"queryName"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"Description"},model:{value:e.queryDescription,callback:function(a){e.queryDescription=a},expression:"queryDescription"}})],1)],1)],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{staticClass:"mr-4",attrs:{color:"error",outlined:""},on:{click:e.reset}},[e._v(" Annuler ")]),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,loading:e.loadingSaveQuery,outlined:"",color:"success"},on:{click:e.validate}},[e._v("Confirmer")])],1)],1)],1)],1)],1),t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.affSQL,callback:function(a){e.affSQL=a},expression:"affSQL"}},[t("v-card",[t("v-card-title",[t("h2",{staticClass:"subheading grey--text"},[e._v("Requête SQL :")])]),t("v-card-text",[e._v(" "+e._s(e.querySQL)+" ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{staticClass:"mr-4",attrs:{color:"primary darken-1",outlined:""},on:{click:function(a){e.affSQL=!1}}},[e._v(" Fermer ")])],1)],1)],1)],1),t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.affSaved,callback:function(a){e.affSaved=a},expression:"affSaved"}},[t("v-card",[t("v-card-title",[t("h2",{staticClass:"subheading grey--text"},[e._v("Requêtes sauvegardées :")])]),t("v-card-text",[t("v-select",{staticClass:"mx-2",attrs:{items:e.savedQueries,label:"Choisir une requête",outlined:""},model:{value:e.selectedSavedQuery,callback:function(a){e.selectedSavedQuery=a},expression:"selectedSavedQuery"}})],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{staticClass:"mr-4",attrs:{color:"primary darken-1",outlined:""},on:{click:function(a){e.affSaved=!1}}},[e._v(" Fermer ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"green darken-1",outlined:"",loading:e.loadImportQuery},on:{click:e.getSavedQuery}},[e._v(" Importer ")])],1)],1)],1)],1)],1)],1)},re=[],se=(t("10d1"),t("ac1f"),t("1276"),t("fb6a"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-col",{staticClass:"d-flex"},[t("v-layout",[t("v-select",{staticClass:"mx-2",attrs:{items:this.metadatas.data,label:"Metadata",outlined:"",disabled:!(void 0==this.$route.params.metadataName)},model:{value:e.metadata,callback:function(a){e.metadata=a},expression:"metadata"}}),t("v-select",{staticClass:"mx-2",attrs:{disabled:""==e.metadata&&!e.loadModel,items:this.models.data,"item-text":"name",label:"Business model",outlined:"",loading:e.loadModel},model:{value:e.model,callback:function(a){e.model=a},expression:"model"}}),t("v-select",{staticClass:"mx-2",attrs:{disabled:""==e.model,items:this.packages.data,label:"Business package",outlined:"",loading:e.loadPackages},model:{value:e.bPackage,callback:function(a){e.bPackage=a},expression:"bPackage"}})],1)],1)}),oe=[],ce={data:function(){return{metadata:"",model:"",bPackage:"",loadModel:!1,loadPackages:!1}},computed:Object(c["a"])({},Object(I["e"])(["metadatas","models","packages","Tables"])),beforeMount:function(){void 0!=this.$route.params.metadataName&&(this.metadata=this.$route.params.metadataName)},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(I["b"])(["getBusinessModels","getBusinessPackages"])),Object(I["d"])(["SELECT_METADATA","SELECT_MODEL","SELECT_PACKAGE","SET_MODELS","SET_PACKAGES","SET_TABLES"])),{},{getModels:function(){var e=this;this.loadModel=!0,this.model="",this.bPackage="",this.SELECT_METADATA(this.metadata),this.SELECT_MODEL(""),this.SELECT_PACKAGE(""),this.SET_MODELS([]),this.SET_PACKAGES([]),this.SET_TABLES([]),this.getBusinessModels(this.metadata).then((function(){e.loadModel=!1})).catch((function(){e.loadModel=!1}))},getPackages:function(){var e=this;this.loadPackages=!0,this.SELECT_MODEL(this.model),this.SELECT_PACKAGE(""),this.SET_PACKAGES([]),this.SET_TABLES([]),this.getBusinessPackages({metadataName:this.metadata,modelName:this.model}).then((function(){e.loadPackages=!1})).catch((function(){e.loadPackages=!1}))}}),watch:{metadata:function(){""!=this.metadata&&this.getModels()},model:function(){""!=this.model&&this.getPackages()},bPackage:function(){""!=this.bPackage&&this.SELECT_PACKAGE(this.bPackage)}}},ie=ce,le=(t("dd68"),Object(m["a"])(ie,se,oe,!1,null,"da475640",null)),ue=le.exports;p()(le,{VCol:R["a"],VLayout:x["a"],VSelect:J["a"]});var de=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-container",{staticClass:"pa-0"},[t("v-row",[t("v-col",{attrs:{md:e.breakpointTreeview}},[t("v-select",{staticClass:"mx-3 mt-4",attrs:{"return-object":"",items:e.fitleredAxeColumns,"item-text":"name",label:"Axe x",outlined:""},model:{value:e.Axe_X,callback:function(a){e.Axe_X=a},expression:"Axe_X"}}),e.isFilled?t("GroupChart",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}}):e._e()],1),t("v-col",{staticClass:"mt-1"},[t("v-card",{attrs:{flat:""}},[e._l(e.series,(function(a,n){return t("v-card",{key:n,attrs:{flat:""}},[t("v-container",{staticClass:"mx-2"},[t("v-row",[t("v-col",{staticClass:"px-2",attrs:{md:"6"}},[t("v-select",{staticClass:"mx-2",attrs:{"return-object":"",items:e.filteredColumns,"item-text":"name",label:"Colonne",outlined:""},model:{value:a.column,callback:function(t){e.$set(a,"column",t)},expression:"item.column"}})],1),t("v-col",{staticClass:"px-2",attrs:{md:"4"}},[t("v-select",{staticClass:"mx-2",attrs:{items:e.aggregations,"item-text":"name",label:"Aggréagtion",outlined:""},model:{value:a.agg,callback:function(t){e.$set(a,"agg",t)},expression:"item.agg"}})],1),t("v-col",{staticClass:"mt-2 mr-5",attrs:{md:"1"}},[t("v-btn",{attrs:{icon:"",disabled:0==n,color:"red lighten-2"},on:{click:function(t){e.series.splice(e.series.indexOf(a),1)}}},[t("v-icon",[e._v("mdi-close-circle-outline")])],1)],1)],1)],1)],1)})),t("v-card-actions",{staticClass:"mt-0"},[t("v-spacer"),t("v-btn",{staticClass:"mt-0 mx-3",attrs:{color:"primary darken-1"},on:{click:function(a){return e.series.push({column:{},agg:"Compte"})}}},[e._v(" Ajouter une série ")])],1)],2)],1)],1)],1)},me=[],fe=(t("4de4"),t("caad"),t("2532"),t("b64b"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("v-container",{staticClass:"mt-8"},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-layout",{attrs:{column:"",wrap:""}},e._l(e.TabType,(function(a){return t("v-flex",{key:a.name,attrs:{xs1:"",sm1:"",md1:"",lg1:""}},[t("v-btn",{staticClass:"my-3 indigo",attrs:{dark:"",text:""},on:{click:function(t){return e.changeType(a.Type)}}},[t("v-icon",[e._v(e._s(a.Icon))])],1)],1)})),1),t("v-flex",{attrs:{xs10:"",sm10:"",md10:"",lg10:""}},["Barchart"==e.ChartType?t("div",{staticClass:"Chart"},[t("bar-example",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}})],1):e._e(),"Horizontal Barchart"==e.ChartType?t("div",{staticClass:"Chart"},[t("horizontal-bar-example",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}})],1):e._e(),"Linechart"==e.ChartType?t("div",{staticClass:"Chart"},[t("line-example",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}})],1):e._e(),"Doughnutchart"==e.ChartType?t("div",{staticClass:"Chart"},[t("doughnut-example",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}})],1):e._e(),"Piechart"==e.ChartType?t("div",{staticClass:"Chart"},[t("pie-example",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}})],1):e._e()])],1)],1)],1)}),pe=[],ve=(t("25f0"),t("159b"),t("99af"),t("1fca")),he={extends:ve["a"],name:"Bar",props:{selectedColumns:Array,Axe_X:Object,series:Array},computed:{},methods:{getDatas:function(){var e,a=[],t=[],n=this.series.filter((function(e){return!(0===Object.keys(e.column).length)})),r=Object(o["a"])(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;t.push({label:s.column.name,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16),data:[],scaleOverride:!0,scaleStartValue:0})}}catch(c){r.e(c)}finally{r.f()}return this.manageDatasets(t,a,n)},manageDatasets:function(e,a,t){var n=this;this.$store.state.queryResult.forEach((function(r){if(a.includes(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)])){l=a.indexOf(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var s,c=Object(o["a"])(t);try{for(c.s();!(s=c.n()).done;){var i=s.value;n.manageCase(i,l,e,r)}}catch(f){c.e(f)}finally{c.f()}}else{var l;a.push(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var u,d=Object(o["a"])(t);try{var m=function(){var t=u.value;switch(l=a.length-1,t.agg){case"Compte":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Somme":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Maximum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Minimum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Moyenne":e.find((function(e){return e.label==t.column.name})).data.push({sum:0,nb:0});break;case"Compte Distinct":e.find((function(e){return e.label==t.column.name})).data.push([]);break;default:console.log("Error no agg assigned.")}n.manageCase(t,l,e,r)};for(d.s();!(u=d.n()).done;)m()}catch(f){d.e(f)}finally{d.f()}}}));var r,s=Object(o["a"])(t);try{var c=function(){var a=r.value;if("Moyenne"==a.agg)for(var t=0;t<e.find((function(e){return e.label==a.column.name})).data.length;t++)e.find((function(e){return e.label==a.column.name})).data[t]=parseFloat(e.find((function(e){return e.label==a.column.name})).data[t].sum)/e.find((function(e){return e.label==a.column.name})).data[t].nb;if("Compte Distinct"==a.agg){e.find((function(e){return e.label==a.column.name})).data.forEach((function(e){return e.length}));for(var n=0;n<e.find((function(e){return e.label==a.column.name})).data.length;n++)e.find((function(e){return e.label==a.column.name})).data[n]=e.find((function(e){return e.label==a.column.name})).data[n].length}};for(s.s();!(r=s.n()).done;)c()}catch(i){s.e(i)}finally{s.f()}return{labels:a,datasets:e}},manageCase:function(e,a,t,n){switch(e.agg){case"Compte":t.find((function(a){return a.label==e.column.name})).data[a]+=1;break;case"Somme":t.find((function(a){return a.label==e.column.name})).data[a]+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]);break;case"Maximum":var r=t.find((function(a){return a.label==e.column.name})).data[a],s=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(r)<parseFloat(s)&&(t.find((function(a){return a.label==e.column.name})).data[a]=s);break;case"Minimum":var o=t.find((function(a){return a.label==e.column.name})).data[a],c=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(o)>parseFloat(c)&&(t.find((function(a){return a.label==e.column.name})).data[a]=c);break;case"Moyenne":t.find((function(a){return a.label==e.column.name})).data[a].sum+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]),t.find((function(a){return a.label==e.column.name})).data[a].nb+=1;break;case"Compte Distinct":t.find((function(a){return a.label==e.column.name})).data[a].includes(n["".concat(e.column.parent,":").concat(e.column.name)])||t.find((function(a){return a.label==e.column.name})).data[a].push(n["".concat(e.column.parent,":").concat(e.column.name)]);break;default:console.log("Error no agg assigned.")}}},mounted:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0,yAxes:[{ticks:{beginAtZero:!0}}]})},watch:{Axe_X:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},series:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},queryResult:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0}}},be=t("2909"),ge=(t("d81d"),t("6062"),{extends:ve["d"],name:"Line",props:{selectedColumns:Array,Axe_X:Object,series:Array},computed:{chartData:function(){var e=[],a=[],t=[];return this.kpi.data.forEach((function(n){if(a=[],1!=n.Cacher){n.result[0].forEach((function(t){var n=t.date.split("T");e.includes(n[0])||e.push(n[0]),a.push(t.value)}));var r={label:n.name,data:a,backgroundColor:"transparent",borderColor:"#"+(16777215*Math.random()<<0).toString(16),pointBackgroundColor:"transparent"};t.push(r)}})),{labels:e,datasets:t}}},methods:{aggCompte:function(){},getLabels:function(){var e=this,a=this.$store.state.queryResult.map((function(a){return a["".concat(e.Axe_X.parent,":").concat(e.Axe_X.name)]})),t=Object(be["a"])(new Set(a));return t},getDatas:function(){var e,a=[],t=[],n=this.series.filter((function(e){return!(0===Object.keys(e.column).length)})),r=Object(o["a"])(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;t.push({label:s.column.name,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16),data:[],scaleOverride:!0,scaleStartValue:0})}}catch(c){r.e(c)}finally{r.f()}return this.manageDatasets(t,a,n)},manageDatasets:function(e,a,t){var n=this;this.$store.state.queryResult.forEach((function(r){if(a.includes(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)])){l=a.indexOf(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var s,c=Object(o["a"])(t);try{for(c.s();!(s=c.n()).done;){var i=s.value;n.manageCase(i,l,e,r)}}catch(f){c.e(f)}finally{c.f()}}else{var l;a.push(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var u,d=Object(o["a"])(t);try{var m=function(){var t=u.value;switch(l=a.length-1,t.agg){case"Compte":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Somme":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Maximum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Minimum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Moyenne":e.find((function(e){return e.label==t.column.name})).data.push({sum:0,nb:0});break;case"Compte Distinct":e.find((function(e){return e.label==t.column.name})).data.push([]);break;default:console.log("Error no agg assigned.")}n.manageCase(t,l,e,r)};for(d.s();!(u=d.n()).done;)m()}catch(f){d.e(f)}finally{d.f()}}}));var r,s=Object(o["a"])(t);try{var c=function(){var a=r.value;if("Moyenne"==a.agg)for(var t=0;t<e.find((function(e){return e.label==a.column.name})).data.length;t++)e.find((function(e){return e.label==a.column.name})).data[t]=parseFloat(e.find((function(e){return e.label==a.column.name})).data[t].sum)/e.find((function(e){return e.label==a.column.name})).data[t].nb;if("Compte Distinct"==a.agg){e.find((function(e){return e.label==a.column.name})).data.forEach((function(e){return e.length}));for(var n=0;n<e.find((function(e){return e.label==a.column.name})).data.length;n++)e.find((function(e){return e.label==a.column.name})).data[n]=e.find((function(e){return e.label==a.column.name})).data[n].length}};for(s.s();!(r=s.n()).done;)c()}catch(i){s.e(i)}finally{s.f()}return{labels:a,datasets:e}},manageCase:function(e,a,t,n){switch(e.agg){case"Compte":t.find((function(a){return a.label==e.column.name})).data[a]+=1;break;case"Somme":t.find((function(a){return a.label==e.column.name})).data[a]+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]);break;case"Maximum":var r=t.find((function(a){return a.label==e.column.name})).data[a],s=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(r)<parseFloat(s)&&(t.find((function(a){return a.label==e.column.name})).data[a]=s);break;case"Minimum":var o=t.find((function(a){return a.label==e.column.name})).data[a],c=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(o)>parseFloat(c)&&(t.find((function(a){return a.label==e.column.name})).data[a]=c);break;case"Moyenne":t.find((function(a){return a.label==e.column.name})).data[a].sum+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]),t.find((function(a){return a.label==e.column.name})).data[a].nb+=1;break;case"Compte Distinct":t.find((function(a){return a.label==e.column.name})).data[a].includes(n["".concat(e.column.parent,":").concat(e.column.name)])||t.find((function(a){return a.label==e.column.name})).data[a].push(n["".concat(e.column.parent,":").concat(e.column.name)]);break;default:console.log("Error no agg assigned.")}}},mounted:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0,yAxes:[{ticks:{beginAtZero:!0}}]})},watch:{Axe_X:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},series:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},queryResult:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0}}}),ye={extends:ve["b"],name:"Doughnut",props:{selectedColumns:Array,Axe_X:Object,series:Array},data:function(){return{options:{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0,yAxes:[{ticks:{beginAtZero:!0}}],tooltips:{callbacks:{label:function(e,a){return a.datasets[e.datasetIndex].label+": "+a.labels[e.index]+": "+a.datasets[e.datasetIndex].data[e.index]}}}}}},computed:{chartData:function(){var e=[],a=[],t=[];return this.kpi.data.forEach((function(n){if(a=[],1!=n.Cacher){n.result[0].forEach((function(t){var n=t.date.split("T");e.includes(n[0])||e.push(n[0]),a.push(t.value)}));var r={label:n.name,data:a,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};t.push(r)}})),{labels:e,datasets:t}}},methods:{aggCompte:function(){},getLabels:function(){var e=this,a=this.$store.state.queryResult.map((function(a){return a["".concat(e.Axe_X.parent,":").concat(e.Axe_X.name)]})),t=Object(be["a"])(new Set(a));return t},getDatas:function(){var e,a=[],t=[],n=this.series.filter((function(e){return!(0===Object.keys(e.column).length)})),r=Object(o["a"])(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;t.push({label:s.column.name,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16),data:[],scaleOverride:!0,scaleStartValue:0})}}catch(c){r.e(c)}finally{r.f()}return this.manageDatasets(t,a,n)},manageDatasets:function(e,a,t){var n=this;this.$store.state.queryResult.forEach((function(r){if(a.includes(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)])){l=a.indexOf(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var s,c=Object(o["a"])(t);try{for(c.s();!(s=c.n()).done;){var i=s.value;n.manageCase(i,l,e,r)}}catch(f){c.e(f)}finally{c.f()}}else{var l;a.push(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var u,d=Object(o["a"])(t);try{var m=function(){var t=u.value;switch(l=a.length-1,t.agg){case"Compte":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Somme":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Maximum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Minimum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Moyenne":e.find((function(e){return e.label==t.column.name})).data.push({sum:0,nb:0});break;case"Compte Distinct":e.find((function(e){return e.label==t.column.name})).data.push([]);break;default:console.log("Error no agg assigned.")}n.manageCase(t,l,e,r)};for(d.s();!(u=d.n()).done;)m()}catch(f){d.e(f)}finally{d.f()}}}));for(var r=[],s=0;s<a.length;s++)r.push("#"+(16777215*Math.random()<<0).toString(16));var c,i=Object(o["a"])(t);try{var l=function(){var a=c.value;if("Moyenne"==a.agg)for(var t=0;t<e.find((function(e){return e.label==a.column.name})).data.length;t++)e.find((function(e){return e.label==a.column.name})).data[t]=parseFloat(e.find((function(e){return e.label==a.column.name})).data[t].sum)/e.find((function(e){return e.label==a.column.name})).data[t].nb;if("Compte Distinct"==a.agg){e.find((function(e){return e.label==a.column.name})).data.forEach((function(e){return e.length}));for(var n=0;n<e.find((function(e){return e.label==a.column.name})).data.length;n++)e.find((function(e){return e.label==a.column.name})).data[n]=e.find((function(e){return e.label==a.column.name})).data[n].length}};for(i.s();!(c=i.n()).done;)l()}catch(f){i.e(f)}finally{i.f()}var u,d=Object(o["a"])(e);try{for(d.s();!(u=d.n()).done;){var m=u.value;m.backgroundColor=r}}catch(f){d.e(f)}finally{d.f()}return{labels:a,datasets:e}},manageCase:function(e,a,t,n){switch(e.agg){case"Compte":t.find((function(a){return a.label==e.column.name})).data[a]+=1;break;case"Somme":t.find((function(a){return a.label==e.column.name})).data[a]+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]);break;case"Maximum":var r=t.find((function(a){return a.label==e.column.name})).data[a],s=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(r)<parseFloat(s)&&(t.find((function(a){return a.label==e.column.name})).data[a]=s);break;case"Minimum":var o=t.find((function(a){return a.label==e.column.name})).data[a],c=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(o)>parseFloat(c)&&(t.find((function(a){return a.label==e.column.name})).data[a]=c);break;case"Moyenne":t.find((function(a){return a.label==e.column.name})).data[a].sum+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]),t.find((function(a){return a.label==e.column.name})).data[a].nb+=1;break;case"Compte Distinct":t.find((function(a){return a.label==e.column.name})).data[a].includes(n["".concat(e.column.parent,":").concat(e.column.name)])||t.find((function(a){return a.label==e.column.name})).data[a].push(n["".concat(e.column.parent,":").concat(e.column.name)]);break;default:console.log("Error no agg assigned.")}}},mounted:function(){var e=this.getDatas();this.renderChart(e,this.options)},watch:{Axe_X:{handler:function(){var e=this.getDatas();this.renderChart(e,this.options)},deep:!0},series:{handler:function(){var e=this.getDatas();this.renderChart(e,this.options)},deep:!0},queryResult:{handler:function(){var e=this.getDatas();this.renderChart(e,this.options)},deep:!0}}},ke={extends:ve["e"],name:"Pie",props:{selectedColumns:Array,Axe_X:Object,series:Array},data:function(){return{options:{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0,yAxes:[{ticks:{beginAtZero:!0}}],tooltips:{callbacks:{label:function(e,a){return a.datasets[e.datasetIndex].label+": "+a.labels[e.index]+": "+a.datasets[e.datasetIndex].data[e.index]}}}}}},computed:{chartData:function(){var e=[],a=[],t=[];return this.kpi.data.forEach((function(n){if(a=[],1!=n.Cacher){n.result[0].forEach((function(t){var n=t.date.split("T");e.includes(n[0])||e.push(n[0]),a.push(t.value)}));var r={label:n.name,data:a,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};t.push(r)}})),{labels:e,datasets:t}}},methods:{aggCompte:function(){},getLabels:function(){var e=this,a=this.$store.state.queryResult.map((function(a){return a["".concat(e.Axe_X.parent,":").concat(e.Axe_X.name)]})),t=Object(be["a"])(new Set(a));return t},getDatas:function(){var e,a=[],t=[],n=this.series.filter((function(e){return!(0===Object.keys(e.column).length)})),r=Object(o["a"])(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;t.push({label:s.column.name,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16),data:[],scaleOverride:!0,scaleStartValue:0})}}catch(c){r.e(c)}finally{r.f()}return this.manageDatasets(t,a,n)},manageDatasets:function(e,a,t){var n=this;this.$store.state.queryResult.forEach((function(r){if(a.includes(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)])){l=a.indexOf(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var s,c=Object(o["a"])(t);try{for(c.s();!(s=c.n()).done;){var i=s.value;n.manageCase(i,l,e,r)}}catch(f){c.e(f)}finally{c.f()}}else{var l;a.push(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var u,d=Object(o["a"])(t);try{var m=function(){var t=u.value;switch(l=a.length-1,t.agg){case"Compte":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Somme":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Maximum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Minimum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Moyenne":e.find((function(e){return e.label==t.column.name})).data.push({sum:0,nb:0});break;case"Compte Distinct":e.find((function(e){return e.label==t.column.name})).data.push([]);break;default:console.log("Error no agg assigned.")}n.manageCase(t,l,e,r)};for(d.s();!(u=d.n()).done;)m()}catch(f){d.e(f)}finally{d.f()}}}));for(var r=[],s=0;s<a.length;s++)r.push("#"+(16777215*Math.random()<<0).toString(16));var c,i=Object(o["a"])(t);try{var l=function(){var a=c.value;if("Moyenne"==a.agg)for(var t=0;t<e.find((function(e){return e.label==a.column.name})).data.length;t++)e.find((function(e){return e.label==a.column.name})).data[t]=parseFloat(e.find((function(e){return e.label==a.column.name})).data[t].sum)/e.find((function(e){return e.label==a.column.name})).data[t].nb;if("Compte Distinct"==a.agg){e.find((function(e){return e.label==a.column.name})).data.forEach((function(e){return e.length}));for(var n=0;n<e.find((function(e){return e.label==a.column.name})).data.length;n++)e.find((function(e){return e.label==a.column.name})).data[n]=e.find((function(e){return e.label==a.column.name})).data[n].length}};for(i.s();!(c=i.n()).done;)l()}catch(f){i.e(f)}finally{i.f()}var u,d=Object(o["a"])(e);try{for(d.s();!(u=d.n()).done;){var m=u.value;m.backgroundColor=r}}catch(f){d.e(f)}finally{d.f()}return{labels:a,datasets:e}},manageCase:function(e,a,t,n){switch(e.agg){case"Compte":t.find((function(a){return a.label==e.column.name})).data[a]+=1;break;case"Somme":t.find((function(a){return a.label==e.column.name})).data[a]+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]);break;case"Maximum":var r=t.find((function(a){return a.label==e.column.name})).data[a],s=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(r)<parseFloat(s)&&(t.find((function(a){return a.label==e.column.name})).data[a]=s);break;case"Minimum":var o=t.find((function(a){return a.label==e.column.name})).data[a],c=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(o)>parseFloat(c)&&(t.find((function(a){return a.label==e.column.name})).data[a]=c);break;case"Moyenne":t.find((function(a){return a.label==e.column.name})).data[a].sum+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]),t.find((function(a){return a.label==e.column.name})).data[a].nb+=1;break;case"Compte Distinct":t.find((function(a){return a.label==e.column.name})).data[a].includes(n["".concat(e.column.parent,":").concat(e.column.name)])||t.find((function(a){return a.label==e.column.name})).data[a].push(n["".concat(e.column.parent,":").concat(e.column.name)]);break;default:console.log("Error no agg assigned.")}}},mounted:function(){var e=this.getDatas();this.renderChart(e,this.options)},watch:{Axe_X:{handler:function(){var e=this.getDatas();this.renderChart(e,this.options)},deep:!0},series:{handler:function(){var e=this.getDatas();this.renderChart(e,this.options)},deep:!0},queryResult:{handler:function(){var e=this.getDatas();this.renderChart(e,this.options)},deep:!0}}},Ce={extends:ve["c"],name:"HorizontalBar",props:{selectedColumns:Array,Axe_X:Object,series:Array},computed:{chartData:function(){var e=[],a=[],t=[];return this.kpi.data.forEach((function(n){if(a=[],1!=n.Cacher){n.result[0].forEach((function(t){var n=t.date.split("T");e.includes(n[0])||e.push(n[0]),a.push(t.value)}));var r={label:n.name,data:a,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};t.push(r)}})),{labels:e,datasets:t}}},methods:{aggCompte:function(){},getLabels:function(){var e=this,a=this.$store.state.queryResult.map((function(a){return a["".concat(e.Axe_X.parent,":").concat(e.Axe_X.name)]})),t=Object(be["a"])(new Set(a));return t},getDatas:function(){var e,a=[],t=[],n=this.series.filter((function(e){return!(0===Object.keys(e.column).length)})),r=Object(o["a"])(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;t.push({label:s.column.name,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16),data:[],scaleOverride:!0,scaleStartValue:0})}}catch(c){r.e(c)}finally{r.f()}return this.manageDatasets(t,a,n)},manageDatasets:function(e,a,t){var n=this;this.$store.state.queryResult.forEach((function(r){if(a.includes(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)])){l=a.indexOf(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var s,c=Object(o["a"])(t);try{for(c.s();!(s=c.n()).done;){var i=s.value;n.manageCase(i,l,e,r)}}catch(f){c.e(f)}finally{c.f()}}else{var l;a.push(r["".concat(n.Axe_X.parent,":").concat(n.Axe_X.name)]);var u,d=Object(o["a"])(t);try{var m=function(){var t=u.value;switch(l=a.length-1,t.agg){case"Compte":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Somme":e.find((function(e){return e.label==t.column.name})).data.push(0);break;case"Maximum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Minimum":e.find((function(e){return e.label==t.column.name})).data.push(parseFloat(r["".concat(t.column.parent,":").concat(t.column.name)]));break;case"Moyenne":e.find((function(e){return e.label==t.column.name})).data.push({sum:0,nb:0});break;case"Compte Distinct":e.find((function(e){return e.label==t.column.name})).data.push([]);break;default:console.log("Error no agg assigned.")}n.manageCase(t,l,e,r)};for(d.s();!(u=d.n()).done;)m()}catch(f){d.e(f)}finally{d.f()}}}));var r,s=Object(o["a"])(t);try{var c=function(){var a=r.value;if("Moyenne"==a.agg)for(var t=0;t<e.find((function(e){return e.label==a.column.name})).data.length;t++)e.find((function(e){return e.label==a.column.name})).data[t]=parseFloat(e.find((function(e){return e.label==a.column.name})).data[t].sum)/e.find((function(e){return e.label==a.column.name})).data[t].nb;if("Compte Distinct"==a.agg){e.find((function(e){return e.label==a.column.name})).data.forEach((function(e){return e.length}));for(var n=0;n<e.find((function(e){return e.label==a.column.name})).data.length;n++)e.find((function(e){return e.label==a.column.name})).data[n]=e.find((function(e){return e.label==a.column.name})).data[n].length}};for(s.s();!(r=s.n()).done;)c()}catch(i){s.e(i)}finally{s.f()}return{labels:a,datasets:e}},manageCase:function(e,a,t,n){switch(e.agg){case"Compte":t.find((function(a){return a.label==e.column.name})).data[a]+=1;break;case"Somme":t.find((function(a){return a.label==e.column.name})).data[a]+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]);break;case"Maximum":var r=t.find((function(a){return a.label==e.column.name})).data[a],s=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(r)<parseFloat(s)&&(t.find((function(a){return a.label==e.column.name})).data[a]=s);break;case"Minimum":var o=t.find((function(a){return a.label==e.column.name})).data[a],c=n["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(o)>parseFloat(c)&&(t.find((function(a){return a.label==e.column.name})).data[a]=c);break;case"Moyenne":t.find((function(a){return a.label==e.column.name})).data[a].sum+=parseFloat(n["".concat(e.column.parent,":").concat(e.column.name)]),t.find((function(a){return a.label==e.column.name})).data[a].nb+=1;break;case"Compte Distinct":t.find((function(a){return a.label==e.column.name})).data[a].includes(n["".concat(e.column.parent,":").concat(e.column.name)])||t.find((function(a){return a.label==e.column.name})).data[a].push(n["".concat(e.column.parent,":").concat(e.column.name)]);break;default:console.log("Error no agg assigned.")}}},mounted:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0,yAxes:[{ticks:{beginAtZero:!0}}]})},watch:{Axe_X:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},series:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},queryResult:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0}}},xe={components:{BarExample:he,LineExample:ge,DoughnutExample:ye,PieExample:ke,HorizontalBarExample:Ce},props:{selectedColumns:Array,Axe_X:Object,series:Array},computed:{},data:function(){return{TabType:[{Type:"Barchart",Icon:"mdi-chart-bar"},{Type:"Linechart",Icon:"mdi-chart-line"},{Type:"Doughnutchart",Icon:"mdi-chart-donut"},{Type:"Piechart",Icon:"mdi-chart-pie"},{Type:"Horizontal Barchart",Icon:"mdi-align-horizontal-left"}],ChartType:"Barchart",Titre:"Graph"}},methods:{changeType:function(e){this.ChartType=e}},mounted:function(){this.ChartType="Barchart"}},_e=xe,Se=(t("1014"),Object(m["a"])(_e,fe,pe,!1,null,"4308d4ea",null)),je=Se.exports;p()(Se,{VBtn:g["a"],VContainer:M["a"],VFlex:y["a"],VIcon:k["a"],VLayout:x["a"]});var Ee={name:"Chart",components:{GroupChart:je},props:{selectedColumns:Array,affTreeview:Boolean},data:function(){return{aggregations:["Compte","Somme","Moyenne","Compte Distinct","Maximum","Minimum"],Axe_X:{},series:[{column:{},agg:"Compte"}]}},computed:{breakpointTreeview:function(){return this.affTreeview?6:7},isTyped:function(){var e,a=!1,t=Object(o["a"])(this.selectedColumns);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("UNDEFINED"!==n.type){a=!0;break}}}catch(r){t.e(r)}finally{t.f()}return a},fitleredAxeColumns:function(){return this.isTyped?this.selectedColumns.filter((function(e){return"DIMENSION"==e.type})):this.selectedColumns},filteredColumns:function(){var e=this,a=this.selectedColumns;return this.isTyped&&(a=this.selectedColumns.filter((function(a){return!e.fitleredAxeColumns.includes(a)}))),a},isFilled:function(){return 0!==Object.keys(this.Axe_X).length&&0!==Object.keys(this.series[0].column).length}}},Ae=Ee,Ne=Object(m["a"])(Ae,de,me,!1,null,null,null),Te=Ne.exports;p()(Ne,{VBtn:g["a"],VCard:z["a"],VCardActions:G["a"],VCol:R["a"],VContainer:M["a"],VIcon:k["a"],VRow:P["a"],VSelect:J["a"],VSpacer:N["a"]});var we={name:"Home",components:{List:ue,Chart:Te},data:function(){return{tab:null,fab:!1,affTreeview:!0,loadImportQuery:!1,selectedSavedQuery:"",affSaved:!1,loadSaved:!1,affSQL:!1,loadSQL:!1,loadingQueryResult:!1,affResult:!1,queryDistinct:!1,queryLimit:0,loadingSaveQuery:!1,valid:!0,nameRules:[function(e){return!!e||"Le nom est requis"}],dialogSaveQuery:!1,queryName:"",queryDescription:"",itemKeys:new WeakMap,currentItemKey:0,localTables:[],headers:[{sortable:!1},{text:"Champ",align:"start",value:"name",sortable:!1},{text:"Aggrégation ",value:"agg",sortable:!1},{text:"Position",value:"pos",sortable:!1}],activeColumn:[],selectedColumns:[],search:"",caseSensitive:!1,files:{txt:"mdi-file-document-outline"},tablesLoaded:!1,tablesLoading:!1}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(I["e"])(["metadatas","models","packages","tables","queryResult","querySQL","savedQueries","loadedSavedQuery"])),Object(I["c"])(["repositoryName","groupName"])),{},{filter:function(){return this.caseSensitive?function(e,a,t){return e[t].indexOf(a)>-1}:void 0},items:function(){var e=[];return e},resultHeaders:function(){if(""!=this.queryResult){var e,a=[],t=Object(o["a"])(this.selectedColumns);try{for(t.s();!(e=t.n()).done;){var n=e.value;a.push({text:n.name,value:n.parent+":"+n.name})}}catch(r){t.e(r)}finally{t.f()}return a}return[]},breakpointTreeview:function(){return this.affTreeview?8:12}}),methods:Object(c["a"])(Object(c["a"])({},Object(I["b"])(["getTables","getColumns","addNewSavedQuery","getQueryResult","getTablesAndColumns","getQuerySQL","getSavedQueries","getSavedQueryData"])),{},{getSavedQuery:function(){var e=this;this.loadImportQuery=!0,this.getSavedQueryData({metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,queryName:this.selectedSavedQuery}).then((function(){e.loadImportQuery=!1,e.selectedColumns=[],e.affSaved=!1,e.queryDistinct=e.loadedSavedQuery.queryDistinct,e.queryLimit=e.loadedSavedQuery.queryLimit;var a,t=Object(o["a"])(e.loadedSavedQuery.columns);try{for(t.s();!(a=t.n()).done;){var n=a.value,r=n.split(":"),s=e.localTables.find((function(e){return e.name==r[0]}));e.selectedColumns.push(s.children.find((function(e){return e.name==r[1]})))}}catch(c){t.e(c)}finally{t.f()}})).catch((function(){e.loadImportQuery=!1,e.affSaved=!1}))},getSaved:function(){var e=this;this.loadSaved=!0,this.getSavedQueries({metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected}).then((function(){e.loadSaved=!1,e.affSaved=!0})).catch((function(){e.loadSaved=!1}))},getSQL:function(){var e=this;this.loadSQL=!0;var a,t="",n=Object(o["a"])(this.selectedColumns);try{for(n.s();!(a=n.n()).done;){var r=a.value;t+=r.parent+":"+r.name+","}}catch(c){n.e(c)}finally{n.f()}var s={metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,columns:t,queryName:this.queryName,queryDescription:this.queryDescription,queryLimit:this.queryLimit,queryDistinct:this.queryDistinct};this.getQuerySQL(s).then((function(){e.loadSQL=!1,e.affSQL=!0})).catch((function(){e.loadSQL=!1}))},executeQuery:function(){var e=this;this.loadingQueryResult=!0;var a,t="",n=Object(o["a"])(this.selectedColumns);try{for(n.s();!(a=n.n()).done;){var r=a.value;t+=r.parent+":"+r.name+","}}catch(c){n.e(c)}finally{n.f()}var s={metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,columns:t,queryName:this.queryName,queryDescription:this.queryDescription,queryLimit:this.queryLimit,queryDistinct:this.queryDistinct};this.getQueryResult(s).then((function(){e.loadingQueryResult=!1,e.affResult=!0,e.tab="results",e.fab=!1})).catch((function(){e.loadingQueryResult=!1}))},validate:function(){this.$refs.form.validate()&&this.selectedColumns.length>0&&this.saveQuery()},reset:function(){this.$refs.form.reset(),this.dialogSaveQuery=!1},saveQuery:function(){var e=this;this.loadingSaveQuery=!0;var a,t="",n=Object(o["a"])(this.selectedColumns);try{for(n.s();!(a=n.n()).done;){var r=a.value;t+=r.parent+":"+r.name+","}}catch(c){n.e(c)}finally{n.f()}t=t.slice(0,-1);var s={repositoryName:this.repositoryName,groupName:this.groupName,metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,columns:t,queryName:this.queryName,queryDescription:this.queryDescription,queryLimit:this.queryLimit,queryDistinct:this.queryDistinct};this.addNewSavedQuery(s).then((function(){e.loadingSaveQuery=!1})).catch((function(){e.loadingSaveQuery=!1}))},mySuperAlert:function(){alert(this.activeColumn)},addColumn:function(){var e=this;void 0==this.selectedColumns.find((function(a){return a.name==e.activeColumn[0]}))&&this.selectedColumns.push({name:this.activeColumn[0]})},removeColumn:function(){var e=this,a=this.selectedColumns.find((function(a){return a.name==e.activeColumn[0]}));void 0!=a&&this.selectedColumns.splice(this.selectedColumns.indexOf(a),1)}}),watch:{tab:function(){"chart"==this.tab&&(this.affTreeview=!1)},packages:{handler:function(){var e=this;""!=this.packages.selected?(this.tablesLoading=!0,this.getTablesAndColumns({metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected}).then((function(){e.tablesLoaded=!0,e.tablesLoading=!1,e.localTables=e.tables.data}))):this.tablesLoaded=!1},deep:!0},selectedColumns:{handler:function(){for(var e=0;e<this.selectedColumns.length;e++)this.selectedColumns[e].pos=e+1;this.$store.commit("SET_QUERYRESULT",[]),this.affResult=!1,this.tab="query"},deep:!0},queryDistinct:{handler:function(){this.$store.commit("SET_QUERYRESULT",[]),this.affResult=!1,this.tab="query"}},queryLimit:{handler:function(){this.$store.commit("SET_QUERYRESULT",[]),this.affResult=!1,this.tab="query"}}}},Oe=we,De=(t("2b56"),t("ac7c")),Le=t("8fea"),qe=t("4bd4"),Ve=t("8dd9"),Re=t("c73b"),Me=t("71a3"),Qe=t("c671"),Pe=t("fe57"),Xe=t("aac8"),Fe=t("9a96"),Ie=t("8654"),Ue=t("3a2f"),Be=t("eb2a"),$e=Object(m["a"])(Oe,ne,re,!1,null,null,null),ze=$e.exports;p()($e,{VBtn:g["a"],VCard:z["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:G["c"],VCheckbox:De["a"],VCol:R["a"],VContainer:M["a"],VDataTable:Le["a"],VDialog:K["a"],VForm:qe["a"],VIcon:k["a"],VRow:P["a"],VSelect:J["a"],VSheet:Ve["a"],VSpacer:N["a"],VSpeedDial:Re["a"],VTab:Me["a"],VTabItem:Qe["a"],VTabs:Pe["a"],VTabsItems:Xe["a"],VTabsSlider:Fe["a"],VTextField:Ie["a"],VTooltip:Ue["a"],VTreeview:Be["a"]});var Ge=function(){var e=this,a=e.$createElement;e._self._c;return e._m(0)},Ke=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("h1",[e._v("Error 404 : Page not found")])])}],Ye={name:"NotFound"},He=Ye,Ze=Object(m["a"])(He,Ge,Ke,!1,null,null,null),Je=Ze.exports;n["a"].use(te["a"]);var We=[{path:"/",name:"Dashboard",component:ze},{path:"/portail/:groupName/:metadataName",name:"Home",component:ze},{path:"*",component:Je}],ea=new te["a"]({mode:"history",routes:We}),aa=ea,ta=(t("9911"),t("bc3a")),na=t.n(ta),ra=t("7dc5");na.a.defaults.baseURL=ra.baseURL,na.a.defaults.headers.common["X-Gravitee-Api-Key"]="f3510842-ef9b-4ee7-8877-4d59b5d63907",n["a"].use(I["a"]);var sa=new I["a"].Store({state:{userLogin:"",loadedSavedQuery:{queryDistinct:!1,queryLimit:0,columns:[]},savedQueries:[],querySQL:"",queryResult:[],repositories:{name:"Référentiels",data:[],selected:""},repositoryName:"",groups:{name:"Groupes",data:[],selected:""},groupName:"",metadatas:{name:"Metadatas",data:[],selected:""},models:{name:"Business Models",data:[],selected:""},packages:{name:"Business Packages",data:[],selected:""},tables:{name:"Business Tables ",data:[],columns:[],selected:"",idCount:0},snackbars:{id:0,data:[]},bottom_redirect_btn:{visible:!1,link:""}},mutations:{ADD_SNACKBAR:function(e,a){e.snackbars.data.push(a)},REMOVE_SNACKBAR:function(e,a){e.snackbars.data.splice(a,1)},SET_BOTTOM_REDIRECT_BTN:function(e,a){e.bottom_redirect_btn=a},SET_REPOSITORYNAME:function(e,a){e.repositoryName=a},SET_GROUPS:function(e,a){e.groups.data=a},SET_METADATAS:function(e,a){e.metadatas.data=a},SET_MODELS:function(e,a){e.models.data=a},SET_PACKAGES:function(e,a){e.packages.data=a},SET_TABLES:function(e,a){e.tables.data=a},SELECT_REPOSITORY:function(e,a){e.repositories.selected=a},SELECT_GROUP:function(e,a){e.groups.selected=a},SELECT_METADATA:function(e,a){e.metadatas.selected=a},SELECT_MODEL:function(e,a){e.models.selected=a},SELECT_PACKAGE:function(e,a){e.packages.selected=a},INC_ID:function(e){e.tables.idCount++},SET_QUERYRESULT:function(e,a){e.queryResult=a},SET_QUERYSQL:function(e,a){e.querySQL=a},SET_SAVEDQUERIES:function(e,a){e.savedQueries=a},SET_LOADEDSAVEDQUERY:function(e,a){e.loadedSavedQuery=a}},actions:{setBottomBtn:function(e,a){var t=e.commit;t("SET_BOTTOM_REDIRECT_BTN",a)},clickBottomBtn:function(e){var a=e.commit,t=e.state;""!=t.bottom_redirect_btn.link&&(aa.push(t.bottom_redirect_btn.link),a("SET_BOTTOM_REDIRECT_BTN",{visible:!1,link:""}))},addSnackbar:function(e,a){var t=e.state,n=e.commit,r=e.dispatch;a.id=t.snackbars.id,t.snackbars.id++,n("ADD_SNACKBAR",a),setTimeout((function(e){e("removeSnackbar",a)}),5e3,r)},removeSnackbar:function(e,a){var t=e.state,n=e.commit,r=t.snackbars.data.indexOf(a);-1!=r&&n("REMOVE_SNACKBAR",r)},getGroups:function(e){var a=e.commit;return new Promise((function(e,t){na.a.get("/groups").then((function(t){if("success"==t.data.status){var n=[];t.data.result.forEach((function(e){return n.push(e.name)})),a("SET_GROUPS",[])}e(t.data.result)})).catch((function(e){e.reponse?console.log("Unable to retrieve groups message : "+e.response.data.message):console.log("Unable to retrieve groups : "+e),t(e)}))}))},getUserGroups:function(e,a){var t=e.commit,n=a.userLogin;return new Promise((function(e,a){na.a.get("/user/".concat(n,"/groups")).then((function(a){"success"==a.data.status&&t("SET_GROUPS",a.data.result),e(a.data.result)})).catch((function(e){e.response.data.message&&e.response.data.message.includes("User not found.")?a("User not found."):console.log("Unable to retrieve groups : "+e),a(e)}))}))},getMetadata:function(e){var a=e.commit,t=e.getters,n=e.dispatch;return new Promise((function(e,r){na.a.get("/metadatas",{params:{repositoryName:t.repositoryName,groupName:t.groupName}}).then((function(t){"success"==t.data.status&&a("SET_METADATAS",t.data.result),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve metadatas message : "+e.response.data.message):console.log("Unable to retrieve metadatas : "+e),n("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Metadatas.",color:"error"}),r(e)}))}))},getBusinessModels:function(e,a){var t=e.commit,n=e.getters,r=e.dispatch;return new Promise((function(e,s){na.a.get("/models",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:a}}).then((function(a){"success"==a.data.status&&t("SET_MODELS",a.data.result),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve models message : "+e.response.data.message):console.log("Unable to retrieve models : "+e),r("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Business Models.",color:"error"}),s(e)}))}))},getBusinessPackages:function(e,a){var t=e.commit,n=e.getters,r=e.dispatch,s=a.metadataName,o=a.modelName;return new Promise((function(e,a){na.a.get("/packages",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:s,modelName:o}}).then((function(a){"success"==a.data.status&&t("SET_PACKAGES",a.data.result),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve packages message : "+e.response.data.message):console.log("Unable to retrieve packages : "+e),r("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Business Packages.",color:"error"}),a(e)}))}))},getTablesAndColumns:function(e,a){var t=e.dispatch,n=e.getters,r=e.commit,s=a.metadataName,c=a.modelName,i=a.packageName;return new Promise((function(e,a){na.a.get("/tables/columns",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:s,modelName:c,packageName:i}}).then((function(a){if("success"==a.data.status){var n=[];a.data.result.forEach((function(e){t("getTableNewID").then((function(a){var r,s=[],c=Object(o["a"])(e.columns);try{var i=function(){var a=r.value;t("getTableNewID").then((function(t){s.push({id:t,name:a.columnName,parent:e.tableName,type:a.type,agg:"NONE",pos:0,file:"txt"})}))};for(c.s();!(r=c.n()).done;)i()}catch(l){c.e(l)}finally{c.f()}n.push({id:a,name:e.tableName,children:s})}))})),r("SET_TABLES",n)}e()})).catch((function(e){e.reponse?console.log("Unable to retrieve tables message : "+e.response.data.message):console.log("Unable to retrieve tables : "+e),t("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Tables.",color:"error"}),a(e)}))}))},getTables:function(e,a){var t=e.commit,n=e.getters,r=e.dispatch,s=a.metadataName,o=a.modelName,c=a.packageName;return new Promise((function(e,a){na.a.get("/tables",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:s,modelName:o,packageName:c}}).then((function(a){if("success"==a.data.status){var n=[];a.data.result.forEach((function(e){r("getTableNewID").then((function(a){n.push({id:a,name:e,children:[]})}))})),t("SET_TABLES",n)}e()})).catch((function(e){e.reponse?console.log("Unable to retrieve tables message : "+e.response.data.message):console.log("Unable to retrieve tables : "+e),r("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Tables.",color:"error"}),a(e)}))}))},getColumns:function(e,a){var t=e.commit,n=e.getters,r=e.dispatch,s=a.metadataName,o=a.modelName,c=a.packageName,i=a.tableName;return new Promise((function(e,a){na.a.get("/columns",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:s,modelName:o,packageName:c,tableName:i}}).then((function(a){if("success"==a.data.status){var s=n.tables,o=s.find((function(e){return e.name==i}));a.data.result.forEach((function(e){r("getTableNewID").then((function(a){o.children.push({id:a,name:e,file:"txt"})}))}))}t("SET_TABLES",s),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve columns message : "+e.response.data.message):console.log("Unable to retrieve columns : "+e),r("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des colonnes.",color:"error"}),a(e)}))}))},addNewSavedQuery:function(e,a){var t=e.dispatch;return new Promise((function(e,n){na.a.post("/query/save",a,{}).then((function(a){"success"===a.data.status&&(t("addSnackbar",{id:0,aff:!0,text:"La requête a été sauvegardée.",color:"success"}),e("Query successfully saved !"))})).catch((function(e){e.response?console.log("Error saving query : "+e.response.data.message):console.log("Error saving query : "+e),n("Error saving query")}))}))},getQueryResult:function(e,a){var t=e.commit,n=e.getters,r=a.metadataName,s=a.modelName,o=a.packageName,c=a.columns,i=a.queryLimit,l=a.queryDistinct;return new Promise((function(e,a){na.a.get("/query/result",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:r,modelName:s,packageName:o,columns:c,queryLimit:i,queryDistinct:l}}).then((function(a){if("success"===a.data.status){var n=[],r=c.split(","),s=a.data.result.substring(1,a.data.result.length-2).split("], ");s.forEach((function(e){for(var a=new Object,t=e.substring(1).split(", "),s=0;s<r.length;s++)a[r[s]]=t[s];n.push(a)})),t("SET_QUERYRESULT",n),e()}})).catch((function(e){e.response?console.log("Error getting query result : "+e.response.data.message):console.log("Error getting query result : "+e),a("Error saving query")}))}))},getQuerySQL:function(e,a){var t=e.commit,n=e.getters,r=a.metadataName,s=a.modelName,o=a.packageName,c=a.columns,i=a.queryLimit,l=a.queryDistinct;return new Promise((function(e,a){na.a.get("/query/sql",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:r,modelName:s,packageName:o,columns:c,queryLimit:i,queryDistinct:l}}).then((function(a){"success"===a.data.status&&(t("SET_QUERYSQL",a.data.result.SQL),e())})).catch((function(e){e.response?console.log("Error getting query SQL : "+e.response.data.message):console.log("Error getting query SQL : "+e),a("Error saving query")}))}))},getSavedQueries:function(e,a){var t=e.commit,n=e.getters,r=a.metadataName,s=a.modelName,o=a.packageName;return new Promise((function(e,a){na.a.get("/queries/saved",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:r,modelName:s,packageName:o}}).then((function(a){"success"===a.data.status&&(t("SET_SAVEDQUERIES",a.data.result),e())})).catch((function(e){e.response?console.log("Error getting saved queries : "+e.response.data.message):console.log("Error getting saved queries : "+e),a("Error saving query")}))}))},getSavedQueryData:function(e,a){var t=e.commit,n=e.getters,r=a.metadataName,s=a.modelName,o=a.packageName,c=a.queryName;return new Promise((function(e,a){na.a.get("/query/saved",{params:{repositoryName:n.repositoryName,groupName:n.groupName,metadataName:r,modelName:s,packageName:o,queryName:c}}).then((function(a){"success"===a.data.status&&(t("SET_LOADEDSAVEDQUERY",a.data.result),e())})).catch((function(e){e.response?console.log("Error getting saved query data : "+e.response.data.message):console.log("Error getting saved query data : "+e),a("Error saving query")}))}))},addUserToGroup:function(e,a){var t=e.state,n=a.userLogin,r=a.group,s={userLogin:n,groupID:r.id};return new Promise((function(e,a){na.a.post("/user/group/add",s,{}).then((function(a){"success"===a.data.status&&(t.groups.data.push(r.name),e("L'utilisateur ".concat(n," a été ajouté au groupe ").concat(r.name,".")))})).catch((function(e){e.response&&console.log("Error adding user ".concat(n," to ").concat(r.name,"  : ")+e.response.data.message),a("Erreur lors de l'ajout de ".concat(n," à ").concat(r.name,"."))}))}))},removeUserFromGroup:function(e,a){var t=e.state,n=a.userLogin,r=a.group,s={userLogin:n,groupID:r.id};return new Promise((function(e,a){na.a.post("/user/group/remove",s,{}).then((function(a){-1!=t.groups.data.indexOf(r.name)&&t.groups.data.splice(t.groups.data.indexOf(r.name),1),"success"===a.data.status&&e("L'utilisateur ".concat(n," a été retiré du groupe ").concat(r.name,"."))})).catch((function(e){e.response&&console.log("Erreur lors du retrait de l'utilisateur ".concat(n," du groupe ").concat(r.name,"  : ")+e.response.data.message),a("Erreur lors du retrait de l'utilisateur ".concat(n," du groupe ").concat(r.name,"."))}))}))},addUser:function(e,a){var t=e.state;return new Promise((function(e,n){t.userLogin=a.login,na.a.post("/user/create",a,{}).then((function(t){"success"===t.data.status&&e("L'utilisateur ".concat(a.login," a été crée."))})).catch((function(e){e.response?console.log("Error adding user ".concat(a.login," : ").concat(e.response.data.message)):console.log("Error adding user ".concat(a.login," : ").concat(e)),n("Erreur lors de la création de l'utilisateur ".concat(a.login,"."))}))}))},getTableNewID:function(e){var a=e.state,t=e.commit,n=a.tables.idCount;return t("INC_ID"),new Promise((function(e){e(n)}))}},getters:{repositoryName:function(e){return e.repositories.selected},groupName:function(e){return e.groups.selected},tables:function(e){return e.tables.data}},modules:{}}),oa=t("f309");n["a"].use(oa["a"]);var ca=new oa["a"]({}),ia=t("68ad"),la=t.n(ia),ua={url:"https://semaphore-keycloak2.data4citizen.com/auth/",realm:"Vanilla7",clientId:"metadata"},da=la()(ua),ma={install:function(e){e.$keycloak=da}};ma.install=function(e){e.$keycloak=da,Object.defineProperties(e.prototype,{$keycloak:{get:function(){return da}}})},n["a"].use(ma);var fa=ma;n["a"].config.productionTip=!1,n["a"].use(fa),n["a"].$keycloak.init({onLoad:"login-required",checkLoginIframe:!1}).then((function(){new n["a"]({router:aa,store:sa,vuetify:ca,render:function(e){return e(ae)}}).$mount("#app")}))},"7dc5":function(e){e.exports=JSON.parse('{"baseURL":"https://semaphore-gravitee-gateway.data4citizen.com/vanilla-api"}')},"9ea8":function(e,a,t){},dd68:function(e,a,t){"use strict";t("20ca")},f9c4:function(e,a,t){e.exports=t.p+"img/vanilla.6e506a77.png"}});
//# sourceMappingURL=app.85cc600e.js.map