(function(e){function t(t){for(var s,o,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"09e0":function(e,t,a){},"11e3":function(e,t,a){"use strict";a("c03a")},"22bc":function(e,t,a){e.exports=a.p+"img/icon_vanilla.1c9b3430.png"},"294d":function(e,t,a){"use strict";a("9ea8")},"2b56":function(e,t,a){"use strict";a("09e0")},"3db6":function(e,t,a){e.exports=a.p+"img/vanilla_white.34deb758.png"},4396:function(e,t,a){e.exports=a.p+"img/BPMConseil.0f4f5753.png"},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"grey lighten-4"},[e.loaded?a("div",[a("Navbar"),a("v-main",{staticClass:"mx-4 mb-4 pb-15"},[a("router-view")],1),e._l(e.snackbars.data,(function(t,s){return a("v-snackbar",{key:t.id,style:"bottom: "+(4*s+1)+"em",attrs:{right:"",rounded:"pill",color:t.color,timeout:"5000"},scopedSlots:e._u([{key:"action",fn:function(s){var n=s.attrs;return[a("v-btn",e._b({attrs:{icon:"",text:""},on:{click:function(a){return e.removeSnackbar(t)}}},"v-btn",n,!1),[a("v-icon",[e._v(" mdi-close-circle ")])],1)]}}],null,!0),model:{value:t.aff,callback:function(a){e.$set(t,"aff",a)},expression:"snackbar.aff"}},[e._v(" "+e._s(t.text)+" ")])})),a("Footer")],2):e._e(),e.loaded||""==e.groups.selected?a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialogGroup,callback:function(t){e.dialogGroup=t},expression:"dialogGroup"}},[a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v("Choisir un groupe")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-select",{staticClass:"mx-2",attrs:{items:this.groups.data,label:"Groupes",outlined:""},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"success"},on:{click:e.selectGroup}},[e._v("Confirmer")])],1)],1)],1):a("div",[a("v-overlay",{attrs:{opacity:"1",value:"true"}},[e.loadingCircular?a("v-progress-circular",{attrs:{indeterminate:"",size:"100"}},[e._v(" "+e._s(e.loadingMsg)+" ")]):a("div",{staticClass:"ma-5"},[e._v(" "+e._s(e.loadingMsg)+" ")])],1)],1)],1)},r=[],o=a("b85c"),i=a("5530"),c=(a("d3b7"),a("b0c0"),a("3ca3"),a("ddb0"),a("7db0"),a("a434"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",[s("v-app-bar",{staticClass:"indigo",attrs:{flat:""}},[s("v-app-bar-nav-icon",{staticClass:"white--text",on:{click:function(t){e.drawer=!e.drawer}}}),s("v-toolbar-title",{staticClass:"text-uppercase white--text"},[s("span",{staticClass:"font-weight-light"},[e._v("VANILLA")]),s("span",[e._v(" METADATA")])]),s("v-spacer"),s("v-btn",{staticClass:"mx-3",attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"https://semaphore-vanilla.data4citizen.com/vanilla"}},[s("v-img",{attrs:{contain:"","max-height":"100","max-width":"120",src:a("3db6")}}),s("v-icon",{staticClass:"ml-1 mt-1",attrs:{medium:"",color:"white"}},[e._v("mdi-open-in-new")])],1)],1),s("v-navigation-drawer",{staticClass:"indigo",attrs:{app:"",temporary:""},scopedSlots:e._u([{key:"append",fn:function(){return[s("v-list",[s("v-list-item",{on:{click:e.logout}},[s("v-list-item-action",[s("v-icon",{staticClass:"white--text"},[e._v("mdi-logout-variant")])],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"white--text"},[e._v("Déconnexion")])],1)],1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[s("v-layout",{attrs:{column:"","align-center":""}},[s("v-flex",{staticClass:"mt-5"},[s("v-avatar",{attrs:{size:"100"}},[s("img",{attrs:{src:a("22bc")}})])],1),s("h3",{staticClass:"white--text"},[e._v(e._s(e.userName))])],1),s("v-list",e._l(e.links,(function(t){return s("v-list-item",{key:t.text,attrs:{to:t.route}},[s("v-list-item-action",[s("v-icon",{staticClass:"white--text"},[e._v(e._s(t.icon))])],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"white--text"},[e._v(e._s(t.text))])],1)],1)})),1)],1)],1)}),l=[],u={name:"Navbar",data:function(){return{drawer:!1,links:[{icon:"mdi-view-dashboard",text:"Dashboard",route:"/"}]}},computed:{userName:function(){return s["a"].$keycloak.tokenParsed.preferred_username}},methods:{logout:function(){s["a"].$keycloak.logout({redirectUri:window.location.origin})}}},d=u,m=a("2877"),f=a("6544"),h=a.n(f),p=a("40dc"),v=a("5bc1"),g=a("8212"),b=a("8336"),y=a("0e8f"),x=a("132d"),k=a("adda"),C=a("a722"),S=a("8860"),_=a("da13"),j=a("1800"),E=a("5d23"),N=a("f774"),O=a("2fa4"),T=a("2a7f"),A=Object(m["a"])(d,c,l,!1,null,null,null),w=A.exports;h()(A,{VAppBar:p["a"],VAppBarNavIcon:v["a"],VAvatar:g["a"],VBtn:b["a"],VFlex:y["a"],VIcon:x["a"],VImg:k["a"],VLayout:C["a"],VList:S["a"],VListItem:_["a"],VListItemAction:j["a"],VListItemContent:E["a"],VListItemTitle:E["b"],VNavigationDrawer:N["a"],VSpacer:O["a"],VToolbarTitle:T["a"]});var L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-footer",{attrs:{id:"dashboard-core-footer",height:"60",absolute:"",padless:""}},[s("v-container",[s("v-row",{attrs:{align:"center","no-gutters":""}},[s("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.bottom_redirect_btn.visible,expression:"$store.state.bottom_redirect_btn.visible"}],attrs:{icon:"",color:"primary"},on:{click:function(t){return e.$store.dispatch("clickBottomBtn")}}},[s("v-icon",{attrs:{size:"24px"}},[e._v("mdi-step-backward")])],1)],1),s("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[s("v-btn",{attrs:{icon:"",color:"primary",to:"/"}},[s("v-icon",{attrs:{size:"24px"}},[e._v("mdi-home")])],1)],1),s("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[s("v-btn",{attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"https://semaphore-vanilla.data4citizen.com/vanilla"}},[s("v-img",{attrs:{"max-height":"24","max-width":"90",src:a("f9c4")}})],1)],1),s("v-col",{staticClass:"text-center mb-sm-0 mb-5",attrs:{cols:"auto"}},[s("v-btn",{staticClass:"ma-0",attrs:{text:"",rounded:"",target:"_blank",rel:"noopener noreferrer",href:"http://www.bpm-conseil.com/fr"}},[s("v-img",{attrs:{"max-height":"24","max-width":"90",src:a("4396")}})],1)],1),s("v-spacer",{staticClass:"hidden-sm-and-down"}),s("v-col",{attrs:{cols:"12",md:"auto"}},[s("div",{staticClass:"body-1 font-weight-light pt-6 pt-md-0 text-center"},[e._v(" Copyright © BPM-Conseil, 2013 - "+e._s((new Date).getFullYear())+". ")])])],1)],1)],1)},D=[],q={name:"Footer"},R=q,P=(a("294d"),a("62ad")),Q=a("a523"),V=a("553a"),M=a("0fd9"),I=Object(m["a"])(R,L,D,!1,null,null,null),U=I.exports;h()(I,{VBtn:b["a"],VCol:P["a"],VContainer:Q["a"],VFooter:V["a"],VIcon:x["a"],VImg:k["a"],VRow:M["a"],VSpacer:O["a"]});var B=a("2f62"),z={name:"App",components:{Navbar:w,Footer:U},data:function(){return{loaded:!1,loadingMsg:"Loading...",loadingCircular:!0,group:"",dialogGroup:!0}},computed:Object(i["a"])({},Object(B["e"])(["snackbars","groups"])),beforeMount:function(){var e=this;this.manageKeycloakUser().then((function(){e.$store.dispatch("getUserGroups",{userLogin:s["a"].$keycloak.tokenParsed.preferred_username})}))},methods:{removeSnackbar:function(e){this.$store.dispatch("removeSnackbar",e)},selectGroup:function(){""!=this.group&&(this.$store.commit("SELECT_GROUP",this.group),this.dialogGroup=!1,this.loadMetadatas())},loadMetadatas:function(){var e=this;this.$store.commit("SELECT_REPOSITORY","Vanilla"),this.$store.dispatch("getMetadata").then((function(){e.loaded=!0})).catch((function(e){console.log("error getting metadatas : "+e)}))},manageKeycloakUser:function(){var e=this,t=s["a"].$keycloak.tokenParsed.preferred_username,a=s["a"].$keycloak.tokenParsed.groups;return new Promise((function(n){e.$store.dispatch("getUserGroups",{userLogin:t}).then((function(s){var r,i=s,c=[],l=Object(o["a"])(a);try{var u=function(){var a=r.value;d=i.find((function(e){return e.name==a})),void 0==d?c.push(e.$store.dispatch("addUserToGroup",{userLogin:t,groupName:a})):i.splice(i.indexOf(d),1)};for(l.s();!(r=l.n()).done;){var d;u()}}catch(p){l.e(p)}finally{l.f()}if(i.length>0){var m,f=Object(o["a"])(i);try{for(f.s();!(m=f.n()).done;){var h=m.value;c.push(e.$store.dispatch("removeUserFromGroup",{userLogin:t,groupName:h.name}))}}catch(p){f.e(p)}finally{f.f()}}Promise.all(c).then((function(){n()}))})).catch((function(r){if("User not found."==r){var i={name:t,login:t,password:"Default",mail:s["a"].$keycloak.tokenParsed.email},c=[];e.$store.dispatch("addUser",i).then((function(){var s,n=Object(o["a"])(a);try{for(n.s();!(s=n.n()).done;){var r=s.value;c.push(e.$store.dispatch("addUserToGroup",{userLogin:t,groupName:r}))}}catch(i){n.e(i)}finally{n.f()}})),Promise.all(c).then((function(){n()}))}}))}))}},watch:{$route:{immediate:!0,handler:function(){document.title="Vanilla Metadata"}}}},$=z,G=a("7496"),F=a("b0af"),X=a("99d9"),K=a("169a"),Y=a("f6c4"),H=a("a797"),J=a("490a"),W=a("b974"),Z=a("2db4"),ee=Object(m["a"])($,n,r,!1,null,null,null),te=ee.exports;h()(ee,{VApp:G["a"],VBtn:b["a"],VCard:F["a"],VCardActions:X["a"],VCardText:X["b"],VCardTitle:X["c"],VContainer:Q["a"],VDialog:K["a"],VIcon:x["a"],VMain:Y["a"],VOverlay:H["a"],VProgressCircular:J["a"],VRow:M["a"],VSelect:W["a"],VSnackbar:Z["a"],VSpacer:O["a"]});var ae=a("8c4f"),se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[a("v-container",{staticClass:"my-5"},[a("List"),a("v-row",{attrs:{wrap:"",justify:"center"}},[e.affTreeview?a("v-col",{attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500",disabled:!e.tablesLoaded,loading:e.tablesLoading}},[a("v-sheet",{staticClass:"pa-4 primary lighten-1"},[a("v-container",{staticClass:"pa-2"},[a("v-row",[a("v-text-field",{attrs:{label:"Rechercher une table ou une colonne",dark:"",flat:"","solo-inverted":"","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-row",[a("v-checkbox",{attrs:{dark:"","hide-details":"",label:"Recherche sensible à la casse"},model:{value:e.caseSensitive,callback:function(t){e.caseSensitive=t},expression:"caseSensitive"}}),a("v-spacer"),a("v-btn",{staticClass:"mt-3 white--text",attrs:{icon:"",text:""},on:{click:function(t){e.affTreeview=!1}}},[a("v-icon",[e._v("mdi-format-horizontal-align-left")])],1)],1)],1)],1),a("v-card-text",[a("v-treeview",{attrs:{items:e.localTables,"item-key":"id","return-object":"",search:e.search,filter:e.filter,hoverable:"","open-on-click":"",rounded:"",selectable:"","selected-color":"primary","expand-icon":"","on-icon":"mdi-chevron-triple-left","off-icon":"mdi-chevron-triple-right","indeterminate-icon":"mdi-chevron-triple-right"},scopedSlots:e._u([{key:"prepend",fn:function(t){var s=t.item,n=t.open;return[s.file?a("v-icon",[e._v(" "+e._s(e.files[s.file])+" ")]):a("v-icon",[e._v(" "+e._s(n?"mdi-folder-open":"mdi-folder")+" ")])]}},{key:"label",fn:function(t){var s=t.item;return["MEASURE"==s.type?a("span",{staticClass:"indigo--text"},[e._v(e._s(s.name))]):"DIMENSION"==s.type?a("span",{staticClass:"green--text"},[e._v(e._s(s.name))]):a("span",{},[e._v(e._s(s.name))])]}}],null,!1,2745321480),model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}})],1)],1)],1):e._e(),a("v-col",{attrs:{cols:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a("v-card",[e.queryResult.length>0&&e.affResult?a("v-data-table",{staticClass:"elevation-1",attrs:{flat:"",headers:e.resultHeaders,items:e.queryResult,"hide-default-footer":e.queryResult.length<10,search:e.search,"footer-props":{"items-per-page-text":"Résultats par page","page-text":"{0} à {1} sur {2}"},"no-results-text":"Aucun résultat."},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-container",[a("v-row",{staticClass:"ma-2"},[a("h1",{staticClass:"subheading grey--text"},[e._v("Résultats de la requête")]),a("v-spacer"),e.affResult?a("v-btn",{staticClass:"white--text",attrs:{color:"primary lighten-1",depressed:""},on:{click:function(t){e.affResult=!1}}},[a("span",{staticClass:"mr-1"},[e._v(" Requête ")]),a("v-icon",[e._v(" mdi-database-settings ")])],1):e._e()],1)],1)]},proxy:!0}],null,!1,790611349)}):a("v-data-table",{staticClass:"elevation-1",attrs:{flat:"",headers:e.headers,items:e.selectedColumns,"hide-default-footer":e.selectedColumns.length<10,search:e.search,"footer-props":{"items-per-page-text":"Colonnes par page","page-text":"{0} à {1} sur {2}"},"no-results-text":"Aucun résultat."},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-container",[e.affResult?e._e():a("v-row",[a("v-col",{staticClass:"mx-4",attrs:{cols:"12",sm:"12",md:"12",xl:"5"}},[a("h1",{staticClass:"subheading grey--text"},[e._v("Création de requête")])]),a("v-spacer"),a("v-col",[a("v-row",{},[a("v-col",{staticClass:"ml-1"},[a("v-checkbox",{attrs:{label:"Distincte"},model:{value:e.queryDistinct,callback:function(t){e.queryDistinct=t},expression:"queryDistinct"}})],1),a("v-col",{staticClass:"mr-3"},[a("v-text-field",{staticClass:"ml-2",attrs:{label:"Limite",type:"number"},model:{value:e.queryLimit,callback:function(t){e.queryLimit=t},expression:"queryLimit"}})],1),a("v-col",[a("v-speed-dial",{attrs:{top:"",right:"",direction:"bottom",transition:"scale-transition",absolute:""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?a("v-icon",[e._v(" mdi-close ")]):a("v-icon",[e._v(" mdi-database-edit ")])],1)]},proxy:!0}],null,!1,26608073),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[0!=e.selectedColumns.length?a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green darken-1"},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},function(t){e.dialogSaveQuery=!0}]}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-content-save")])],1):e._e()]}}],null,!1,3933868802)},[a("span",[e._v("Sauvegarder")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[""!=e.packages.selected?a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green darken-1",loading:e.loadSaved},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},e.getSaved]}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-cloud-download-outline")])],1):e._e()]}}],null,!1,3088443495)},[a("span",[e._v("Charger")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[0!=e.selectedColumns.length?a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green lighten-1",loading:e.loadSQL},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},e.getSQL]}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-file-document-multiple-outline")])],1):e._e()]}}],null,!1,617067060)},[a("span",[e._v("SQL")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[0!=e.selectedColumns.length?a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",loading:e.loadingQueryResult,color:"primary darken-1"},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},e.executeQuery]}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-database-search")])],1):e._e()]}}],null,!1,287255507)},[a("span",[e._v("Exécuter")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[e.queryResult.length>0&&!e.affResult?a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"primary lighten-1"},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},function(t){e.affResult=!0}]}},"v-btn",n,!1),s),[a("v-icon",[e._v(" mdi-clipboard-text-outline")])],1):e._e()]}}],null,!1,637240625)},[a("span",[e._v("Résultats")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"orange lighten-1"},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},function(t){e.selectedColumns=[]}]}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-delete")])],1)]}}],null,!1,221263161)},[a("span",[e._v("Réinitialiser")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[e.affTreeview?e._e():a("v-btn",e._g(e._b({staticClass:"white--text",attrs:{fab:"",dark:"",small:"",color:"green darken-1"},on:{click:[function(t){return t.stopPropagation(),e.zoomOut(t)},function(t){e.affTreeview=!0}]}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-file-tree-outline")])],1)]}}],null,!1,3169935307)},[a("span",[e._v("Afficher les colonnes")])])],1)],1)],1)],1)],1)],1)]},proxy:!0}])})],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[e.queryResult.length>0?a("v-card",[a("Chart",{attrs:{selectedColumns:e.selectedColumns}})],1):e._e()],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialogSaveQuery,callback:function(t){e.dialogSaveQuery=t},expression:"dialogSaveQuery"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v("Sauvegarder une requête")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.nameRules,label:"Nom",required:""},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Description"},model:{value:e.queryDescription,callback:function(t){e.queryDescription=t},expression:"queryDescription"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{color:"error",outlined:""},on:{click:e.reset}},[e._v(" Annuler ")]),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,loading:e.loadingSaveQuery,outlined:"",color:"success"},on:{click:e.validate}},[e._v("Confirmer")])],1)],1)],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.affSQL,callback:function(t){e.affSQL=t},expression:"affSQL"}},[a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v("Requête SQL :")])]),a("v-card-text",[e._v(" "+e._s(e.querySQL)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{color:"primary darken-1",outlined:""},on:{click:function(t){e.affSQL=!1}}},[e._v(" Fermer ")])],1)],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.affSaved,callback:function(t){e.affSaved=t},expression:"affSaved"}},[a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v("Requêtes sauvegardées :")])]),a("v-card-text",[a("v-select",{staticClass:"mx-2",attrs:{items:e.savedQueries,label:"Choisir une requête",outlined:""},model:{value:e.selectedSavedQuery,callback:function(t){e.selectedSavedQuery=t},expression:"selectedSavedQuery"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{color:"primary darken-1",outlined:""},on:{click:function(t){e.affSaved=!1}}},[e._v(" Fermer ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"green darken-1",outlined:"",loading:e.loadImportQuery},on:{click:e.getSavedQuery}},[e._v(" Importer ")])],1)],1)],1)],1)],1)],1)},ne=[],re=(a("10d1"),a("ac1f"),a("1276"),a("fb6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{staticClass:"d-flex"},[a("v-layout",[a("v-select",{staticClass:"mx-2",attrs:{items:this.metadatas.data,label:"Metadata",outlined:""},model:{value:e.metadata,callback:function(t){e.metadata=t},expression:"metadata"}}),a("v-select",{staticClass:"mx-2",attrs:{disabled:""==e.metadata&&!e.loadModel,items:this.models.data,label:"Business model",outlined:"",loading:e.loadModel},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),a("v-select",{staticClass:"mx-2",attrs:{disabled:""==e.model,items:this.packages.data,label:"Business package",outlined:"",loading:e.loadPackages},model:{value:e.bPackage,callback:function(t){e.bPackage=t},expression:"bPackage"}})],1)],1)}),oe=[],ie={data:function(){return{metadata:"",model:"",bPackage:"",loadModel:!1,loadPackages:!1}},computed:Object(i["a"])({},Object(B["e"])(["metadatas","models","packages","Tables"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(B["b"])(["getBusinessModels","getBusinessPackages"])),Object(B["d"])(["SELECT_METADATA","SELECT_MODEL","SELECT_PACKAGE","SET_MODELS","SET_PACKAGES","SET_TABLES"])),{},{getModels:function(){var e=this;this.loadModel=!0,this.model="",this.bPackage="",this.SELECT_METADATA(this.metadata),this.SELECT_MODEL(""),this.SELECT_PACKAGE(""),this.SET_MODELS([]),this.SET_PACKAGES([]),this.SET_TABLES([]),this.getBusinessModels(this.metadata).then((function(){e.loadModel=!1})).catch((function(){e.loadModel=!1}))},getPackages:function(){var e=this;this.loadPackages=!0,this.SELECT_MODEL(this.model),this.SELECT_PACKAGE(""),this.SET_PACKAGES([]),this.SET_TABLES([]),this.getBusinessPackages({metadataName:this.metadata,modelName:this.model}).then((function(){e.loadPackages=!1})).catch((function(){e.loadPackages=!1}))}}),watch:{metadata:function(){""!=this.metadata&&this.getModels()},model:function(){""!=this.model&&this.getPackages()},bPackage:function(){""!=this.bPackage&&this.SELECT_PACKAGE(this.bPackage)}}},ce=ie,le=(a("11e3"),Object(m["a"])(ce,re,oe,!1,null,"46e49599",null)),ue=le.exports;h()(le,{VCol:P["a"],VLayout:C["a"],VSelect:W["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",[a("v-btn",{staticClass:"mt-3 ma-3",on:{click:function(t){return e.series.push({column:{},agg:"Compte"})}}},[e._v(" Ajouter une série ")]),e._l(e.series,(function(t,s){return a("v-card",{key:s},[a("v-container",[a("v-row",[a("v-select",{staticClass:"mx-2",attrs:{"return-object":"",items:e.selectedColumns,"item-text":"name",label:"Colonne",outlined:""},model:{value:t.column,callback:function(a){e.$set(t,"column",a)},expression:"item.column"}}),a("v-select",{staticClass:"mx-2",attrs:{items:e.aggregations,"item-text":"name",label:"Aggréagtion",outlined:""},model:{value:t.agg,callback:function(a){e.$set(t,"agg",a)},expression:"item.agg"}})],1)],1)],1)})),a("v-select",{staticClass:"mx-2 mt-4",attrs:{"return-object":"",items:e.fitleredAxeColumns,"item-text":"name",label:"Axe x",outlined:""},model:{value:e.Axe_X,callback:function(t){e.Axe_X=t},expression:"Axe_X"}}),e.isFilled?a("GroupChart",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}}):e._e()],2)],1)},me=[],fe=(a("4de4"),a("b64b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("v-container",{staticClass:"mt-8"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-layout",{attrs:{column:"",wrap:""}},e._l(e.TabType,(function(t){return a("v-flex",{key:t.name,attrs:{xs1:"",sm1:"",md1:"",lg1:""}},[a("v-btn",{staticClass:"my-3 indigo",attrs:{dark:"",text:""},on:{click:function(a){return e.changeType(t.Type)}}},[a("v-icon",[e._v(e._s(t.Icon))])],1)],1)})),1),a("v-flex",{attrs:{xs10:"",sm10:"",md10:"",lg10:""}},["Barchart"==e.ChartType?a("div",{staticClass:"Chart"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.Titre))]),a("bar-example",{attrs:{Axe_X:e.Axe_X,series:e.series,selectedColumns:e.selectedColumns}})],1):e._e(),"Horizontal Barchart"==e.ChartType?a("div",{staticClass:"Chart"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.Titre))]),a("horizontal-bar-example")],1):e._e(),"Linechart"==e.ChartType?a("div",{staticClass:"Chart"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.Titre))]),a("line-example")],1):e._e(),"Doughnutchart"==e.ChartType?a("div",{staticClass:"Chart"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.Titre))]),a("doughnut-example")],1):e._e(),"Piechart"==e.ChartType?a("div",{staticClass:"Chart"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.Titre))]),a("pie-example")],1):e._e()])],1)],1)],1)}),he=[],pe=a("2909"),ve=(a("159b"),a("caad"),a("25f0"),a("d81d"),a("99af"),a("6062"),a("2532"),a("1fca")),ge={extends:ve["a"],name:"Bar",props:{selectedColumns:Array,Axe_X:Object,series:Array},computed:{chartData:function(){var e=[],t=[],a=[];return this.kpi.data.forEach((function(s){if(t=[],1!=s.Cacher){s.result[0].forEach((function(a){var s=a.date.split("T");e.includes(s[0])||e.push(s[0]),t.push(a.value)}));var n={label:s.name,data:t,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};a.push(n)}})),{labels:e,datasets:a}}},methods:{aggCompte:function(){},getLabels:function(){var e=this,t=this.$store.state.queryResult.map((function(t){return t["".concat(e.Axe_X.parent,":").concat(e.Axe_X.name)]})),a=Object(pe["a"])(new Set(t));return a},getDatas:function(){var e,t=[],a=[],s=this.series.filter((function(e){return!(0===Object.keys(e.column).length)})),n=Object(o["a"])(s);try{for(n.s();!(e=n.n()).done;){var r=e.value;a.push({label:r.column.name,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16),data:[],scaleOverride:!0,scaleStartValue:0})}}catch(i){n.e(i)}finally{n.f()}return this.manageDatasets(a,t,s)},manageDatasets:function(e,t,a){var s=this;this.$store.state.queryResult.forEach((function(n){if(t.includes(n["".concat(s.Axe_X.parent,":").concat(s.Axe_X.name)])){l=t.indexOf(n["".concat(s.Axe_X.parent,":").concat(s.Axe_X.name)]);var r,i=Object(o["a"])(a);try{for(i.s();!(r=i.n()).done;){var c=r.value;s.manageCase(c,l,e,n)}}catch(f){i.e(f)}finally{i.f()}}else{var l;t.push(n["".concat(s.Axe_X.parent,":").concat(s.Axe_X.name)]);var u,d=Object(o["a"])(a);try{var m=function(){var a=u.value;switch(l=t.length-1,a.agg){case"Compte":e.find((function(e){return e.label==a.column.name})).data.push(0);break;case"Somme":e.find((function(e){return e.label==a.column.name})).data.push(0);break;case"Maximum":e.find((function(e){return e.label==a.column.name})).data.push(parseFloat(n["".concat(a.column.parent,":").concat(a.column.name)]));break;case"Minimum":e.find((function(e){return e.label==a.column.name})).data.push(parseFloat(n["".concat(a.column.parent,":").concat(a.column.name)]));break;case"Moyenne":e.find((function(e){return e.label==a.column.name})).data.push({sum:0,nb:0});break;case"Compte Distinct":e.find((function(e){return e.label==a.column.name})).data.push([]);break;default:console.log("Error no agg assigned.")}s.manageCase(a,l,e,n)};for(d.s();!(u=d.n()).done;)m()}catch(f){d.e(f)}finally{d.f()}}}));var n,r=Object(o["a"])(a);try{var i=function(){var t=n.value;if("Moyenne"==t.agg)for(var a=0;a<e.find((function(e){return e.label==t.column.name})).data.length;a++)e.find((function(e){return e.label==t.column.name})).data[a]=parseFloat(e.find((function(e){return e.label==t.column.name})).data[a].sum)/e.find((function(e){return e.label==t.column.name})).data[a].nb;if("Compte Distinct"==t.agg){e.find((function(e){return e.label==t.column.name})).data.forEach((function(e){return e.length}));for(var s=0;s<e.find((function(e){return e.label==t.column.name})).data.length;s++)e.find((function(e){return e.label==t.column.name})).data[s]=e.find((function(e){return e.label==t.column.name})).data[s].length}};for(r.s();!(n=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}return{labels:t,datasets:e}},manageCase:function(e,t,a,s){switch(e.agg){case"Compte":a.find((function(t){return t.label==e.column.name})).data[t]+=1;break;case"Somme":a.find((function(t){return t.label==e.column.name})).data[t]+=parseFloat(s["".concat(e.column.parent,":").concat(e.column.name)]);break;case"Maximum":var n=a.find((function(t){return t.label==e.column.name})).data[t],r=s["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(n)<parseFloat(r)&&(a.find((function(t){return t.label==e.column.name})).data[t]=r);break;case"Minimum":var o=a.find((function(t){return t.label==e.column.name})).data[t],i=s["".concat(e.column.parent,":").concat(e.column.name)];parseFloat(o)>parseFloat(i)&&(a.find((function(t){return t.label==e.column.name})).data[t]=i);break;case"Moyenne":a.find((function(t){return t.label==e.column.name})).data[t].sum+=parseFloat(s["".concat(e.column.parent,":").concat(e.column.name)]),a.find((function(t){return t.label==e.column.name})).data[t].nb+=1;break;case"Compte Distinct":a.find((function(t){return t.label==e.column.name})).data[t].includes(s["".concat(e.column.parent,":").concat(e.column.name)])||a.find((function(t){return t.label==e.column.name})).data[t].push(s["".concat(e.column.parent,":").concat(e.column.name)]);break;default:console.log("Error no agg assigned.")}}},mounted:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0,yAxes:[{ticks:{beginAtZero:!0}}]})},watch:{Axe_X:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0},series:{handler:function(){var e=this.getDatas();this.renderChart(e,{responsive:!0,maintainAspectRatio:!1,scaleOverride:!0,scaleStartValue:0})},deep:!0}}},be={extends:ve["d"],name:"Linechart",computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(B["e"])(["kpi"])),Object(B["e"])(["axis"])),Object(B["e"])(["axisvalues"])),Object(B["e"])(["childrenid"])),Object(B["e"])(["kpioraxis"])),{},{chartData:function(){var e=[],t=[],a=[];return this.kpi.data.forEach((function(s){t=[],s.result[0].forEach((function(a){var s=a.date.split("T");e.includes(s[0])||e.push(s[0]),t.push(a.value)}));var n={label:s.name,data:t,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};a.push(n)})),{labels:e,datasets:a}},chartDataAxis:function(){var e=this,t=[],a=[],s=[],n=[],r=0;console.log("coucou ",this.axis.data),console.log(this.axisvalues),console.log(this.childrenid.data),this.axis.data.forEach((function(t){var a=t.children[0].id,s=0;console.log(a),t.children.forEach((function(t){console.log(t),t.id==e.childrenid.data&&(r=s),s+=1}))}));var o=" ",i=0;this.axisvalues.data.forEach((function(e){if(s=[]," "==o&&(o=e.axis[r].label),e.axis[r].label!=o){t.push(o),o=e.axis[r].label,s.push(i);var a={label:t,data:s,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};n.push(a),t=[],s=[],i=e.value}else i+=e.value})),t.push(o),s.push(i);var c={label:t,data:s,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};n.push(c);var l=[],u=0;return n.forEach((function(e){0!=e.data[0]?l.push(e):u+=1})),console.log(n),u>0&&l.push({label:[u.toString()+" autres membres de valeur = 0"],data:[0],backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)}),{labels:a,datasets:l}},choixKPIorAxis:function(){return"AXIS"==this.kpioraxis.data?this.chartDataAxis:this.chartData}}),methods:{bool:function(){return"AXIS"==this.kpioraxis.data?!(this.axisvalues.data.length>=10):!(this.kpi.data.length>=10)}},mounted:function(){this.renderChart(this.choixKPIorAxis,{responsive:!0,maintainAspectRatio:!1,align:"center",legend:{display:this.bool()}})},watch:{kpi:{handler:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},axisvalues:{handler:function(){this.renderChart(this.chartDataAxis,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0}}},ye={extends:ve["b"],name:"Doughnut",computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(B["e"])(["kpi"])),Object(B["e"])(["axis"])),Object(B["e"])(["axisvalues"])),Object(B["e"])(["childrenid"])),Object(B["e"])(["kpioraxis"])),Object(B["e"])(["hidedata"])),{},{chartData:function(){var e=[],t=[],a=[];return this.kpi.data.forEach((function(s){1!=s.Cacher&&s.result[0].forEach((function(n){if(a.push("#"+(16777215*Math.random()<<0).toString(16)),e.includes(s.name)){var r=e.indexOf(s.name);t[r]=t[r]+n.value}else e.push(s.name),t.push(n.value)}))})),{labels:e,datasets:[{backgroundColor:a,data:t}]}},chartDataAxis:function(){var e=this,t=[],a=[],s=[],n=0;console.log("coucou ",this.axis.data),console.log(this.axisvalues),console.log(this.childrenid.data),this.axis.data.forEach((function(t){var a=t.children[0].id,s=0;console.log(a),t.children.forEach((function(t){console.log(t),t.id==e.childrenid.data&&(console.log("CA FONCTIONNE REELLEMENT "),n=s),s+=1}))}));var r=" ",o=0;this.axisvalues.data.forEach((function(e){" "==r&&(r=e.axis[n].label),e.axis[n].label!=r?(t.push(r),r=e.axis[n].label,a.push(o),s.push("#"+(16777215*Math.random()<<0).toString(16)),o=e.value):o+=e.value})),t.push(r),a.push(o),s.push("#"+(16777215*Math.random()<<0).toString(16));var i=[],c=[],l=0;return a.forEach((function(e){0!=e?(c.push(e),i.push(t[a.indexOf(e)])):l+=1})),l>0&&(c.push(0),i.push(l.toString()+" autres membres de valeur = 0")),{labels:i,datasets:[{backgroundColor:s,data:c}]}},choixKPIorAxis:function(){return"AXIS"==this.kpioraxis.data?this.chartDataAxis:this.chartData}}),methods:{bool:function(){return"AXIS"==this.kpioraxis.data?!(this.axisvalues.data.length>=10):!(this.kpi.data.length>=10)}},mounted:function(){this.renderChart(this.choixKPIorAxis,{responsive:!0,maintainAspectRatio:!1,align:"center",legend:{display:this.bool()}})},watch:{kpi:{handler:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},hidedata:{handler:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},axisvalues:{handler:function(){this.renderChart(this.chartDataAxis,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0}}},xe={extends:ve["e"],name:"Pie",computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(B["e"])(["kpi"])),Object(B["e"])(["axis"])),Object(B["e"])(["axisvalues"])),Object(B["e"])(["childrenid"])),Object(B["e"])(["kpioraxis"])),Object(B["e"])(["hidedata"])),{},{chartData:function(){var e=[],t=[],a=[];return this.kpi.data.forEach((function(s){1!=s.Cacher&&s.result[0].forEach((function(n){if(a.push("#"+(16777215*Math.random()<<0).toString(16)),e.includes(s.name)){var r=e.indexOf(s.name);t[r]=t[r]+n.value}else e.push(s.name),t.push(n.value)}))})),{labels:e,datasets:[{backgroundColor:a,data:t}]}},chartDataAxis:function(){var e=this,t=[],a=[],s=[],n=0;console.log("coucou ",this.axis.data),console.log(this.axisvalues),console.log(this.childrenid.data),this.axis.data.forEach((function(t){var a=t.children[0].id,s=0;console.log(a),t.children.forEach((function(t){console.log(t),t.id==e.childrenid.data&&(console.log("CA FONCTIONNE REELLEMENT "),n=s),s+=1}))}));var r=" ",o=0;this.axisvalues.data.forEach((function(e){" "==r&&(r=e.axis[n].label),e.axis[n].label!=r?(t.push(r),r=e.axis[n].label,a.push(o),s.push("#"+(16777215*Math.random()<<0).toString(16)),o=e.value):o+=e.value})),t.push(r),a.push(o),s.push("#"+(16777215*Math.random()<<0).toString(16));var i=[],c=[],l=0;return a.forEach((function(e){0!=e?(c.push(e),i.push(t[a.indexOf(e)])):l+=1})),l>0&&(c.push(0),i.push(l.toString()+" autres membres de valeur = 0")),{labels:i,datasets:[{backgroundColor:s,data:c}]}},choixKPIorAxis:function(){return"AXIS"==this.kpioraxis.data?this.chartDataAxis:this.chartData}}),methods:{bool:function(){return"AXIS"==this.kpioraxis.data?!(this.axisvalues.data.length>=10):!(this.kpi.data.length>=10)}},mounted:function(){this.renderChart(this.choixKPIorAxis,{responsive:!0,maintainAspectRatio:!1,align:"center",legend:{display:this.bool()}})},watch:{kpi:{handler:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},hidedata:{handler:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},axisvalues:{handler:function(){this.renderChart(this.chartDataAxis,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0}}},ke={extends:ve["c"],name:"HorizontalBar",computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(B["e"])(["kpi"])),Object(B["e"])(["axis"])),Object(B["e"])(["axisvalues"])),Object(B["e"])(["childrenid"])),Object(B["e"])(["kpioraxis"])),Object(B["e"])(["hidedata"])),{},{chartData:function(){var e=[],t=[],a=[];return this.kpi.data.forEach((function(s){if(t=[],1!=s.Cacher){s.result[0].forEach((function(a){var s=a.date.split("T");e.includes(s[0])||e.push(s[0]),t.push(a.value)}));var n={label:s.name,data:t,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};a.push(n)}})),{labels:e,datasets:a}},chartDataAxis:function(){var e=this,t=[],a=[],s=[],n=[],r=0;this.axis.data.forEach((function(t){var a=t.children[0].id,s=0;console.log(a),t.children.forEach((function(t){console.log(t),t.id==e.childrenid.data&&(console.log("CA FONCTIONNE REELLEMENT "),r=s),s+=1}))}));var o="",i=0;this.axisvalues.data.forEach((function(e){if(s=[],""==o&&(o=e.axis[r].label),e.axis[r].label!=o){t.push(o),o=e.axis[r].label,s.push(i);var a={label:t,data:s,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};n.push(a),t=[],s=[],i=e.value}else i+=e.value})),t.push(o),s.push(i);var c={label:t,data:s,backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)};n.push(c);var l=[],u=0;return n.forEach((function(e){0!=e.data[0]?l.push(e):u+=1})),console.log(n),u>0&&l.push({label:[u.toString()+" autres membres de valeur = 0"],data:[0],backgroundColor:"#"+(16777215*Math.random()<<0).toString(16)}),console.log(l),{labels:a,datasets:n}},choixKPIorAxis:function(){return"AXIS"==this.kpioraxis.data?this.chartDataAxis:this.chartData}}),methods:{bool:function(){return"AXIS"==this.kpioraxis.data?!(this.axisvalues.data.length>=10):!(this.kpi.data.length>=10)}},mounted:function(){this.renderChart(this.choixKPIorAxis,{responsive:!0,maintainAspectRatio:!1,align:"center",legend:{display:this.bool()}})},watch:{kpi:{handler:function(){console.log(this.kpioraxis.data),this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},hidedata:{handler:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0},axisvalues:{handler:function(){console.log(this.kpioraxis.data),this.renderChart(this.chartDataAxis,{responsive:!0,maintainAspectRatio:!1,legend:{display:this.bool()}})},deep:!0}}},Ce={components:{BarExample:ge,LineExample:be,DoughnutExample:ye,PieExample:xe,HorizontalBarExample:ke},props:{selectedColumns:Array,Axe_X:Object,series:Array},computed:{},data:function(){return{TabType:[{Type:"Barchart",Icon:"mdi-chart-bar"},{Type:"Linechart",Icon:"mdi-chart-line"},{Type:"Doughnutchart",Icon:"mdi-chart-donut"},{Type:"Piechart",Icon:"mdi-chart-pie"},{Type:"Horizontal Barchart",Icon:"mdi-align-horizontal-left"},{Type:"Gauge",Icon:"mdi-gauge"}],ChartType:"Barchart",Titre:"Graph"}},methods:{changeType:function(e){this.ChartType=e}},mounted:function(){this.ChartType="Barchart"}},Se=Ce,_e=(a("6bda"),Object(m["a"])(Se,fe,he,!1,null,"8f2e95aa",null)),je=_e.exports;h()(_e,{VBtn:b["a"],VContainer:Q["a"],VFlex:y["a"],VIcon:x["a"],VLayout:C["a"]});var Ee={name:"Chart",components:{GroupChart:je},props:{selectedColumns:Array},data:function(){return{aggregations:["Compte","Somme","Moyenne","Compte Distinct","Maximum","Minimum"],Axe_X:{},series:[{column:{},agg:"Compte"}]}},computed:{fitleredAxeColumns:function(){var e,t=!1,a=Object(o["a"])(this.selectedColumns);try{for(a.s();!(e=a.n()).done;){var s=e.value;if("UNDEFINED"!==s.type){t=!0;break}}}catch(n){a.e(n)}finally{a.f()}return t?this.selectedColumns.filter((function(e){return"DIMENSION"==e.type})):this.selectedColumns},filteredColumns:function(){var e=this;return this.selectedColumns.filter((function(t){return void 0==e.series.find((function(e){return e.column.id==t.id}))}))},isFilled:function(){return 0!==Object.keys(this.Axe_X).length&&0!==Object.keys(this.series[0].column).length}}},Ne=Ee,Oe=Object(m["a"])(Ne,de,me,!1,null,null,null),Te=Oe.exports;h()(Oe,{VBtn:b["a"],VCard:F["a"],VContainer:Q["a"],VRow:M["a"],VSelect:W["a"]});var Ae={name:"Home",components:{List:ue,Chart:Te},data:function(){return{fab:!1,affTreeview:!0,loadImportQuery:!1,selectedSavedQuery:"",affSaved:!1,loadSaved:!1,affSQL:!1,loadSQL:!1,loadingQueryResult:!1,affResult:!1,queryDistinct:!1,queryLimit:0,loadingSaveQuery:!1,valid:!0,nameRules:[function(e){return!!e||"Le nom est requis"}],dialogSaveQuery:!1,queryName:"",queryDescription:"",itemKeys:new WeakMap,currentItemKey:0,localTables:[],headers:[{sortable:!1},{text:"Champ",align:"start",value:"name",sortable:!1},{text:"Aggrégation ",value:"agg",sortable:!1},{text:"Position",value:"pos",sortable:!1}],activeColumn:[],selectedColumns:[],search:"",caseSensitive:!1,files:{txt:"mdi-file-document-outline"},tablesLoaded:!1,tablesLoading:!1}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(B["e"])(["metadatas","models","packages","tables","queryResult","querySQL","savedQueries","loadedSavedQuery"])),Object(B["c"])(["repositoryName","groupName"])),{},{filter:function(){return this.caseSensitive?function(e,t,a){return e[a].indexOf(t)>-1}:void 0},items:function(){var e=[];return e},resultHeaders:function(){if(""!=this.queryResult){var e,t=[],a=Object(o["a"])(this.selectedColumns);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push({text:s.name,value:s.parent+":"+s.name})}}catch(n){a.e(n)}finally{a.f()}return t}return[]}}),methods:Object(i["a"])(Object(i["a"])({},Object(B["b"])(["getTables","getColumns","addNewSavedQuery","getQueryResult","getTablesAndColumns","getQuerySQL","getSavedQueries","getSavedQueryData"])),{},{getSavedQuery:function(){var e=this;this.loadImportQuery=!0,this.getSavedQueryData({metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,queryName:this.selectedSavedQuery}).then((function(){e.loadImportQuery=!1,e.selectedColumns=[],e.affSaved=!1,e.queryDistinct=e.loadedSavedQuery.queryDistinct,e.queryLimit=e.loadedSavedQuery.queryLimit;var t,a=Object(o["a"])(e.loadedSavedQuery.columns);try{for(a.s();!(t=a.n()).done;){var s=t.value,n=s.split(":"),r=e.localTables.find((function(e){return e.name==n[0]}));e.selectedColumns.push(r.children.find((function(e){return e.name==n[1]})))}}catch(i){a.e(i)}finally{a.f()}})).catch((function(){e.loadImportQuery=!1,e.affSaved=!1}))},getSaved:function(){var e=this;this.loadSaved=!0,this.getSavedQueries({metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected}).then((function(){e.loadSaved=!1,e.affSaved=!0})).catch((function(){e.loadSaved=!1}))},getSQL:function(){var e=this;this.loadSQL=!0;var t,a="",s=Object(o["a"])(this.selectedColumns);try{for(s.s();!(t=s.n()).done;){var n=t.value;a+=n.parent+":"+n.name+","}}catch(i){s.e(i)}finally{s.f()}var r={metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,columns:a,queryName:this.queryName,queryDescription:this.queryDescription,queryLimit:this.queryLimit,queryDistinct:this.queryDistinct};this.getQuerySQL(r).then((function(){e.loadSQL=!1,e.affSQL=!0})).catch((function(){e.loadSQL=!1}))},executeQuery:function(){var e=this;this.loadingQueryResult=!0;var t,a="",s=Object(o["a"])(this.selectedColumns);try{for(s.s();!(t=s.n()).done;){var n=t.value;a+=n.parent+":"+n.name+","}}catch(i){s.e(i)}finally{s.f()}var r={metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,columns:a,queryName:this.queryName,queryDescription:this.queryDescription,queryLimit:this.queryLimit,queryDistinct:this.queryDistinct};this.getQueryResult(r).then((function(){e.loadingQueryResult=!1,e.affResult=!0})).catch((function(){e.loadingQueryResult=!1}))},validate:function(){this.$refs.form.validate()&&this.selectedColumns.length>0&&this.saveQuery()},reset:function(){this.$refs.form.reset(),this.dialogSaveQuery=!1},saveQuery:function(){var e=this;this.loadingSaveQuery=!0;var t,a="",s=Object(o["a"])(this.selectedColumns);try{for(s.s();!(t=s.n()).done;){var n=t.value;a+=n.parent+":"+n.name+","}}catch(i){s.e(i)}finally{s.f()}a=a.slice(0,-1);var r={repositoryName:this.repositoryName,groupName:this.groupName,metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected,columns:a,queryName:this.queryName,queryDescription:this.queryDescription,queryLimit:this.queryLimit,queryDistinct:this.queryDistinct};this.addNewSavedQuery(r).then((function(){e.loadingSaveQuery=!1})).catch((function(){e.loadingSaveQuery=!1}))},mySuperAlert:function(){alert(this.activeColumn)},addColumn:function(){var e=this;void 0==this.selectedColumns.find((function(t){return t.name==e.activeColumn[0]}))&&this.selectedColumns.push({name:this.activeColumn[0]})},removeColumn:function(){var e=this,t=this.selectedColumns.find((function(t){return t.name==e.activeColumn[0]}));void 0!=t&&this.selectedColumns.splice(this.selectedColumns.indexOf(t),1)}}),watch:{packages:{handler:function(){var e=this;""!=this.packages.selected?(this.tablesLoading=!0,this.getTablesAndColumns({metadataName:this.metadatas.selected,modelName:this.models.selected,packageName:this.packages.selected}).then((function(){e.tablesLoaded=!0,e.tablesLoading=!1,e.localTables=e.tables.data}))):this.tablesLoaded=!1},deep:!0},selectedColumns:{handler:function(){for(var e=0;e<this.selectedColumns.length;e++)this.selectedColumns[e].pos=e+1;this.$store.commit("SET_QUERYRESULT",[]),this.affResult=!1},deep:!0},queryDistinct:{handler:function(){this.$store.commit("SET_QUERYRESULT",[]),this.affResult=!1}}}},we=Ae,Le=(a("2b56"),a("ac7c")),De=a("8fea"),qe=a("4bd4"),Re=a("8dd9"),Pe=a("c73b"),Qe=a("8654"),Ve=a("3a2f"),Me=a("eb2a"),Ie=Object(m["a"])(we,se,ne,!1,null,null,null),Ue=Ie.exports;h()(Ie,{VBtn:b["a"],VCard:F["a"],VCardActions:X["a"],VCardText:X["b"],VCardTitle:X["c"],VCheckbox:Le["a"],VCol:P["a"],VContainer:Q["a"],VDataTable:De["a"],VDialog:K["a"],VForm:qe["a"],VIcon:x["a"],VRow:M["a"],VSelect:W["a"],VSheet:Re["a"],VSpacer:O["a"],VSpeedDial:Pe["a"],VTextField:Qe["a"],VTooltip:Ve["a"],VTreeview:Me["a"]});var Be=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ze=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Error 404 : Page not found")])])}],$e={name:"NotFound"},Ge=$e,Fe=Object(m["a"])(Ge,Be,ze,!1,null,null,null),Xe=Fe.exports;s["a"].use(ae["a"]);var Ke=[{path:"/",name:"Dashboard",component:Ue},{path:"*",component:Xe}],Ye=new ae["a"]({mode:"history",routes:Ke}),He=Ye,Je=(a("9911"),a("bc3a")),We=a.n(Je),Ze=a("7dc5");We.a.defaults.baseURL=Ze.baseURL,We.a.defaults.headers.common["X-Gravitee-Api-Key"]="f3510842-ef9b-4ee7-8877-4d59b5d63907",s["a"].use(B["a"]);var et=new B["a"].Store({state:{userLogin:"",loadedSavedQuery:{queryDistinct:!1,queryLimit:0,columns:[]},savedQueries:[],querySQL:"",queryResult:[],repositories:{name:"Référentiels",data:[],selected:""},repositoryName:"",groups:{name:"Groupes",data:[],selected:""},groupName:"",metadatas:{name:"Metadatas",data:[],selected:""},models:{name:"Business Models",data:[],selected:""},packages:{name:"Business Packages",data:[],selected:""},tables:{name:"Business Tables ",data:[],columns:[],selected:"",idCount:0},snackbars:{id:0,data:[]},bottom_redirect_btn:{visible:!1,link:""}},mutations:{ADD_SNACKBAR:function(e,t){e.snackbars.data.push(t)},REMOVE_SNACKBAR:function(e,t){e.snackbars.data.splice(t,1)},SET_BOTTOM_REDIRECT_BTN:function(e,t){e.bottom_redirect_btn=t},SET_REPOSITORYNAME:function(e,t){e.repositoryName=t},SET_GROUPS:function(e,t){e.groups.data=t},SET_METADATAS:function(e,t){e.metadatas.data=t},SET_MODELS:function(e,t){e.models.data=t},SET_PACKAGES:function(e,t){e.packages.data=t},SET_TABLES:function(e,t){e.tables.data=t},SELECT_REPOSITORY:function(e,t){e.repositories.selected=t},SELECT_GROUP:function(e,t){e.groups.selected=t},SELECT_METADATA:function(e,t){e.metadatas.selected=t},SELECT_MODEL:function(e,t){e.models.selected=t},SELECT_PACKAGE:function(e,t){e.packages.selected=t},INC_ID:function(e){e.tables.idCount++},SET_QUERYRESULT:function(e,t){e.queryResult=t},SET_QUERYSQL:function(e,t){e.querySQL=t},SET_SAVEDQUERIES:function(e,t){e.savedQueries=t},SET_LOADEDSAVEDQUERY:function(e,t){e.loadedSavedQuery=t}},actions:{setBottomBtn:function(e,t){var a=e.commit;a("SET_BOTTOM_REDIRECT_BTN",t)},clickBottomBtn:function(e){var t=e.commit,a=e.state;""!=a.bottom_redirect_btn.link&&(He.push(a.bottom_redirect_btn.link),t("SET_BOTTOM_REDIRECT_BTN",{visible:!1,link:""}))},addSnackbar:function(e,t){var a=e.state,s=e.commit,n=e.dispatch;t.id=a.snackbars.id,a.snackbars.id++,s("ADD_SNACKBAR",t),setTimeout((function(e){e("removeSnackbar",t)}),5e3,n)},removeSnackbar:function(e,t){var a=e.state,s=e.commit,n=a.snackbars.data.indexOf(t);-1!=n&&s("REMOVE_SNACKBAR",n)},getGroups:function(e){var t=e.commit;return new Promise((function(e,a){We.a.get("/groups").then((function(a){if("success"==a.data.status){var s=[];a.data.result.forEach((function(e){return s.push(e.name)})),t("SET_GROUPS",s)}e()})).catch((function(e){e.reponse?console.log("Unable to retrieve groups message : "+e.response.data.message):console.log("Unable to retrieve groups : "+e),a(e)}))}))},getUserGroups:function(e,t){var a=e.commit,s=t.userLogin;return new Promise((function(e,t){We.a.get("/user/".concat(s,"/groups")).then((function(t){if("success"==t.data.status){var s=[];t.data.result.forEach((function(e){return s.push(e.name)})),a("SET_GROUPS",s)}e(t.data.result)})).catch((function(e){e.response.data.message&&e.response.data.message.includes("User not found.")?t("User not found."):console.log("Unable to retrieve groups : "+e),t(e)}))}))},getMetadata:function(e){var t=e.commit,a=e.getters,s=e.dispatch;return new Promise((function(e,n){We.a.get("/metadatas",{params:{repositoryName:a.repositoryName,groupName:a.groupName}}).then((function(a){"success"==a.data.status&&t("SET_METADATAS",a.data.result),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve metadatas message : "+e.response.data.message):console.log("Unable to retrieve metadatas : "+e),s("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Metadatas.",color:"error"}),n(e)}))}))},getBusinessModels:function(e,t){var a=e.commit,s=e.getters,n=e.dispatch;return new Promise((function(e,r){We.a.get("/models",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:t}}).then((function(t){"success"==t.data.status&&a("SET_MODELS",t.data.result),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve models message : "+e.response.data.message):console.log("Unable to retrieve models : "+e),n("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Business Models.",color:"error"}),r(e)}))}))},getBusinessPackages:function(e,t){var a=e.commit,s=e.getters,n=e.dispatch,r=t.metadataName,o=t.modelName;return new Promise((function(e,t){We.a.get("/packages",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:r,modelName:o}}).then((function(t){"success"==t.data.status&&a("SET_PACKAGES",t.data.result),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve packages message : "+e.response.data.message):console.log("Unable to retrieve packages : "+e),n("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Business Packages.",color:"error"}),t(e)}))}))},getTablesAndColumns:function(e,t){var a=e.dispatch,s=e.getters,n=e.commit,r=t.metadataName,i=t.modelName,c=t.packageName;return new Promise((function(e,t){We.a.get("/tables/columns",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:r,modelName:i,packageName:c}}).then((function(t){if("success"==t.data.status){var s=[];t.data.result.forEach((function(e){a("getTableNewID").then((function(t){var n,r=[],i=Object(o["a"])(e.columns);try{var c=function(){var t=n.value;a("getTableNewID").then((function(a){r.push({id:a,name:t.columnName,parent:e.tableName,type:t.type,agg:"NONE",pos:0,file:"txt"})}))};for(i.s();!(n=i.n()).done;)c()}catch(l){i.e(l)}finally{i.f()}s.push({id:t,name:e.tableName,children:r})}))})),n("SET_TABLES",s)}e()})).catch((function(e){e.reponse?console.log("Unable to retrieve tables message : "+e.response.data.message):console.log("Unable to retrieve tables : "+e),a("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Tables.",color:"error"}),t(e)}))}))},getTables:function(e,t){var a=e.commit,s=e.getters,n=e.dispatch,r=t.metadataName,o=t.modelName,i=t.packageName;return new Promise((function(e,t){We.a.get("/tables",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:r,modelName:o,packageName:i}}).then((function(t){if("success"==t.data.status){var s=[];t.data.result.forEach((function(e){n("getTableNewID").then((function(t){s.push({id:t,name:e,children:[]})}))})),a("SET_TABLES",s)}e()})).catch((function(e){e.reponse?console.log("Unable to retrieve tables message : "+e.response.data.message):console.log("Unable to retrieve tables : "+e),n("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des Tables.",color:"error"}),t(e)}))}))},getColumns:function(e,t){var a=e.commit,s=e.getters,n=e.dispatch,r=t.metadataName,o=t.modelName,i=t.packageName,c=t.tableName;return new Promise((function(e,t){We.a.get("/columns",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:r,modelName:o,packageName:i,tableName:c}}).then((function(t){if("success"==t.data.status){var r=s.tables,o=r.find((function(e){return e.name==c}));t.data.result.forEach((function(e){n("getTableNewID").then((function(t){o.children.push({id:t,name:e,file:"txt"})}))}))}a("SET_TABLES",r),e()})).catch((function(e){e.reponse?console.log("Unable to retrieve columns message : "+e.response.data.message):console.log("Unable to retrieve columns : "+e),n("addSnackbar",{id:0,aff:!0,text:"Erreur lors de la récupération des colonnes.",color:"error"}),t(e)}))}))},addNewSavedQuery:function(e,t){var a=e.dispatch;return new Promise((function(e,s){We.a.post("/query/save",t,{}).then((function(t){"success"===t.data.status&&(a("addSnackbar",{id:0,aff:!0,text:"La requête a été sauvegardée.",color:"success"}),e("Query successfully saved !"))})).catch((function(e){e.response?console.log("Error saving query : "+e.response.data.message):console.log("Error saving query : "+e),s("Error saving query")}))}))},getQueryResult:function(e,t){var a=e.commit,s=e.getters,n=t.metadataName,r=t.modelName,o=t.packageName,i=t.columns,c=t.queryLimit,l=t.queryDistinct;return new Promise((function(e,t){We.a.get("/query/result",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:n,modelName:r,packageName:o,columns:i,queryLimit:c,queryDistinct:l}}).then((function(t){if("success"===t.data.status){var s=[],n=i.split(","),r=t.data.result.substring(1,t.data.result.length-2).split("], ");r.forEach((function(e){for(var t=new Object,a=e.substring(1).split(", "),r=0;r<n.length;r++)t[n[r]]=a[r];s.push(t)})),a("SET_QUERYRESULT",s),e()}})).catch((function(e){e.response?console.log("Error getting query result : "+e.response.data.message):console.log("Error getting query result : "+e),t("Error saving query")}))}))},getQuerySQL:function(e,t){var a=e.commit,s=e.getters,n=t.metadataName,r=t.modelName,o=t.packageName,i=t.columns,c=t.queryLimit,l=t.queryDistinct;return new Promise((function(e,t){We.a.get("/query/sql",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:n,modelName:r,packageName:o,columns:i,queryLimit:c,queryDistinct:l}}).then((function(t){"success"===t.data.status&&(a("SET_QUERYSQL",t.data.result.SQL),e())})).catch((function(e){e.response?console.log("Error getting query SQL : "+e.response.data.message):console.log("Error getting query SQL : "+e),t("Error saving query")}))}))},getSavedQueries:function(e,t){var a=e.commit,s=e.getters,n=t.metadataName,r=t.modelName,o=t.packageName;return new Promise((function(e,t){We.a.get("/queries/saved",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:n,modelName:r,packageName:o}}).then((function(t){"success"===t.data.status&&(a("SET_SAVEDQUERIES",t.data.result),e())})).catch((function(e){e.response?console.log("Error getting saved queries : "+e.response.data.message):console.log("Error getting saved queries : "+e),t("Error saving query")}))}))},getSavedQueryData:function(e,t){var a=e.commit,s=e.getters,n=t.metadataName,r=t.modelName,o=t.packageName,i=t.queryName;return new Promise((function(e,t){We.a.get("/query/saved",{params:{repositoryName:s.repositoryName,groupName:s.groupName,metadataName:n,modelName:r,packageName:o,queryName:i}}).then((function(t){"success"===t.data.status&&(a("SET_LOADEDSAVEDQUERY",t.data.result),e())})).catch((function(e){e.response?console.log("Error getting saved query data : "+e.response.data.message):console.log("Error getting saved query data : "+e),t("Error saving query")}))}))},addUserToGroup:function(e,t){var a=e.state,s=t.userLogin,n=t.groupName,r={userLogin:s,groupName:n};return new Promise((function(e,t){We.a.post("/user/group/add",r,{}).then((function(t){"success"===t.data.status&&e("L'utilisateur ".concat(s," a été ajouté au groupe ").concat(n,".")),a.groups.data.push(n)})).catch((function(e){e.response&&console.log("Error adding user ".concat(s," to ").concat(n,"  : ")+e.response.data.message),t("Erreur lors de l'ajout de ".concat(s," à ").concat(n,"."))}))}))},removeUserFromGroup:function(e,t){var a=e.state,s=t.userLogin,n=t.groupName,r={userLogin:s,groupName:n};return new Promise((function(e,t){We.a.post("/user/group/remove",r,{}).then((function(t){-1!=a.groups.data.indexOf(n)&&a.groups.data.splice(a.groups.data.indexOf(n),1),"success"===t.data.status&&e("L'utilisateur ".concat(s," a été retiré du groupe ").concat(n,"."))})).catch((function(e){e.response&&console.log("Erreur lors du retrait de l'utilisateur ".concat(s," du groupe ").concat(n,"  : ")+e.response.data.message),t("Erreur lors du retrait de l'utilisateur ".concat(s," du groupe ").concat(n,"."))}))}))},addUser:function(e,t){var a=e.state;return new Promise((function(e,s){a.userLogin=t.login,We.a.post("/user/create",t,{}).then((function(a){"success"===a.data.status&&e("L'utilisateur ".concat(t.login," a été crée."))})).catch((function(e){e.response?console.log("Error adding user ".concat(t.login," : ").concat(e.response.data.message)):console.log("Error adding user ".concat(t.login," : ").concat(e)),s("Erreur lors de la création de l'utilisateur ".concat(t.login,"."))}))}))},getTableNewID:function(e){var t=e.state,a=e.commit,s=t.tables.idCount;return a("INC_ID"),new Promise((function(e){e(s)}))}},getters:{repositoryName:function(e){return e.repositories.selected},groupName:function(e){return e.groups.selected},tables:function(e){return e.tables.data}},modules:{}}),tt=a("f309");s["a"].use(tt["a"]);var at=new tt["a"]({}),st=a("68ad"),nt=a.n(st),rt={url:"https://semaphore-keycloak2.data4citizen.com/auth/",realm:"Vanilla7",clientId:"metadata"},ot=nt()(rt),it={install:function(e){e.$keycloak=ot}};it.install=function(e){e.$keycloak=ot,Object.defineProperties(e.prototype,{$keycloak:{get:function(){return ot}}})},s["a"].use(it);var ct=it;s["a"].config.productionTip=!1,s["a"].use(ct),s["a"].$keycloak.init({onLoad:"login-required",checkLoginIframe:!1}).then((function(){new s["a"]({router:He,store:et,vuetify:at,render:function(e){return e(te)}}).$mount("#app")}))},"6bda":function(e,t,a){"use strict";a("76c2")},"76c2":function(e,t,a){},"7dc5":function(e){e.exports=JSON.parse('{"baseURL":"https://semaphore-gravitee-gateway.data4citizen.com/vanilla-api"}')},"9ea8":function(e,t,a){},c03a:function(e,t,a){},f9c4:function(e,t,a){e.exports=a.p+"img/vanilla.6e506a77.png"}});
//# sourceMappingURL=app.d010aaa0.js.map